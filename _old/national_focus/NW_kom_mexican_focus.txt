focus_tree = {
	id = kom_mexican_focus
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = KMX
		}
	}
	
	default = no
	
	continuous_focus_position = { x = 50 y = 1500 }
	
	focus = {
		id = KMX_new_konstitute
		icon = GFX_focus_renounce_the_treaty_of_trianon
		cost = 5.00
		x = 10
		y = 0

		ai_will_do = {
			factor = 100
		}
		
		available_if_capitulated = yes
		
		completion_reward = {
			add_political_power = 150
			country_event = { id = tromexico.3 }
		}		
	}
	
	focus = {
		id = KMX_guarantee_political_freedoms
		icon = GFX_focus_generic_concessions
		prerequisite = { focus = KMX_new_konstitute }
		x = -8
		y = 1
		relative_position_id = KMX_new_konstitute
		mutually_exclusive = { focus = KMX_new_mayak }
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_guarantee_political_freedoms"
			add_stability = 0.1
		}
	}
	
	focus = {
		id = KMX_coalition_with_socialists
		icon = GFX_goal_generic_dangerous_deal
		prerequisite = { focus = KMX_guarantee_political_freedoms }
		x = -2
		y = 1
		relative_position_id = KMX_guarantee_political_freedoms
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_coalition_with_socialists"
			add_popularity = {
				ideology = neutrality
				popularity = -0.3
			}
		}
	}
	
	focus = {
		id = KMX_support_catholic_church
		icon = GFX_goal_generic_dangerous_deal
		prerequisite = { focus = KMX_guarantee_political_freedoms }
		x = 2
		y = 1
		relative_position_id = KMX_guarantee_political_freedoms
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_support_catholic_church"
			add_ideas = KMX_support_catholic_church_idea
		}
	}
	
	focus = {
		id = KMX_create_councils
		icon = GFX_focus_generic_join_comintern
		prerequisite = { focus = KMX_guarantee_political_freedoms }
		x = 0
		y = 1
		relative_position_id = KMX_guarantee_political_freedoms
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_create_councils"
			set_politics = {
				ruling_party = trozkism
				elections_allowed = no
			}
			add_stability = 0.05
		}
	}
	
	focus = {
		id = KMX_ban_unsocialist_parties
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = KMX_create_councils }
		x = 0
		y = 1
		relative_position_id = KMX_create_councils
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_ban_unsocialist_parties"
			add_timed_idea = { idea = KMX_ban_unsocialist_parties_idea days = 150 }
		}
	}
	
	focus = {
		id = KMX_befriend_britain
		icon = GFX_focus_chi_british_cooperation
		prerequisite = { focus = KMX_ban_unsocialist_parties }
		x = -2
		y = 1
		relative_position_id = KMX_ban_unsocialist_parties
		mutually_exclusive = { focus = KMX_four_interna }
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_ban_unsocialist_parties"
			add_opinion_modifier = { target = ENG modifier = BUL_SOV_friend }
			ENG = { add_opinion_modifier = { target = ROOT modifier = BUL_SOV_friend } }
		}
	}
	
	focus = {
		id = KMX_join_to_allies
		icon = GFX_focus_chi_british_cooperation
		prerequisite = { focus = KMX_befriend_britain }
		x = -2
		y = 1
		relative_position_id = KMX_befriend_britain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		bypass = {
			is_in_faction_with = ENG
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_join_to_allies"
			ENG = {
			    add_to_faction = KMX
			}
			hidden_effect = {
				ENG = {
					add_ai_strategy = {
						type = alliance
						id = ROOT
						value = 200
					}
				}
				add_ai_strategy = {
					type = alliance
					id = ENG
					value = 200
				}
			}
		}
	}
	
	focus = {
		id = KMX_british_mexican_cooperation
		icon = GFX_goal_generic_scientific_exchange
		prerequisite = { focus = KMX_join_to_allies }
		x = 0
		y = 1
		relative_position_id = KMX_join_to_allies

		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			country_exists = ENG
			is_in_faction_with = ENG
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_join_to_allies"
			ROOT = { add_to_tech_sharing_group = KMX_british_mexican_group }
			ENG = { add_to_tech_sharing_group = KMX_british_mexican_group }
		}
	}
	
	focus = {
		id = KMX_antistalinist_rhetoric
		icon = GFX_focus_generic_strike_at_democracy1
		prerequisite = { focus = KMX_befriend_britain focus = KMX_four_interna }
		x = 2
		y = 1
		relative_position_id = KMX_befriend_britain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_antistalinist_rhetoric"
			add_country_leader_trait = antistalinist_rhetoric
			add_popularity = {
				ideology = communism
				popularity = -0.1
			}
			SOV = { add_opinion_modifier = { target = KMX modifier = anti_sov_ritor } }
			
			every_other_country = {
                limit = {
					is_in_faction_with = SOV
					is_faction_leader = no
				}
                add_opinion_modifier = { target = KMX modifier = anti_sov_ritor }
			}
			hidden_effect = { news_event = { id = trworldnews.27 } }
		}
	}
	
	focus = {
		id = KMX_defend_true_marxism
		icon = GFX_focus_eng_liberate_the_home_of_marx
		prerequisite = { focus = KMX_antistalinist_rhetoric }
		x = 0
		y = 1
		relative_position_id = KMX_antistalinist_rhetoric
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_defend_true_marxism"
			add_war_support = 0.075
		}
	}
	
	focus = {
		id = KMX_four_interna
		icon = GFX_goal_support_fourth_int
		prerequisite = { focus = KMX_ban_unsocialist_parties }
		x = 2
		y = 1
		relative_position_id = KMX_ban_unsocialist_parties
		mutually_exclusive = { focus = KMX_befriend_britain }
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_four_interna"
			set_rule = { can_create_factions = yes }
			create_faction = "four_international_faction"
			set_global_flag = four_inter_flag
			hidden_effect = { news_event = { id = trworldnews.20 } }
		}
	}
	
	focus = {
		id = KMX_influence_southwards
		icon = GFX_focus_yug_pan_slavic_congress
		cost = 10
		prerequisite = {
			focus = KMX_four_interna
		}
		x = 1
		y = 1
		relative_position_id = KMX_four_interna

		ai_will_do = {
			factor = 20
		}

		available_if_capitulated = yes

		completion_reward = {
		    add_political_power = -100
			GUA = {
				add_ideas = trozkism_influence1
				country_event = { id = tromexico.11 }
			}
			ELS = {
				add_ideas = trozkism_influence1
				country_event = { id = tromexico.11 }
			}
			NIC = {
				add_ideas = trozkism_influence1
				country_event = { id = tromexico.11 }
			}
		}
	}
	
	focus = {
		id = KMX_influence_caribbean
		icon = GFX_focus_yug_pan_slavic_congress
		cost = 10
		prerequisite = {
			focus = KMX_influence_southwards
		}
		x = -1
		y = 1
		relative_position_id = KMX_influence_southwards

		ai_will_do = {
			factor = 20
		}

		available_if_capitulated = yes

		completion_reward = {
		    add_political_power = -100
			CUB = {
				add_ideas = trozkism_influence1
				country_event = { id = tromexico.11 }
			}
			HAI = {
				add_ideas = trozkism_influence1
				country_event = { id = tromexico.11 }
			}
			DOM = {
				add_ideas = trozkism_influence1
				country_event = { id = tromexico.11 }
			}
		}
	}
	
	focus = {
		id = KMX_influence_centroamerica
		icon = GFX_focus_yug_pan_slavic_congress
		cost = 10
		prerequisite = {
			focus = KMX_influence_southwards
		}
		x = 1
		y = 1
		relative_position_id = KMX_influence_southwards

		ai_will_do = {
			factor = 20
		}

		available_if_capitulated = yes

		completion_reward = {
		    add_political_power = -100
			NIC = {
				add_ideas = trozkism_influence1
				country_event = { id = tromexico.11 }
			}
			COS = {
				add_ideas = trozkism_influence1
				country_event = { id = tromexico.11 }
			}
			PAN = {
				add_ideas = trozkism_influence1
				country_event = { id = tromexico.11 }
			}
		}
	}
	
	focus = {
		id = KMX_dem_victory_of_trozkism
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = KMX_influence_caribbean }
		prerequisite = { focus = KMX_influence_centroamerica }
		x = 1
		y = 1
		relative_position_id = KMX_influence_caribbean
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_dem_victory_of_trozkism"
			add_political_power = 100
			add_stability = 0.1
		}
	}
	
	focus = {
		id = KMX_war_venesuela
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = KMX_british_mexican_cooperation focus = KMX_dem_victory_of_trozkism }
		x = -2
		y = 1
		relative_position_id = KMX_dem_victory_of_trozkism

		cost = 10

		ai_will_do = {
			factor = 100
		}

		available = {
			VEN = {
			    has_government = fascism
			}	
		}

		bypass = {
			VEN = {
			    OR = {
				    NOT = { has_government = fascism }
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = VEN
			NOT = { country_exists = VEN }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
                type = annex_everything
                target = VEN
            }
		}
		will_lead_to_war_with = VEN
	}
	
	focus = {
		id = KMX_war_peru
		icon = GFX_goal_generic_major_war
		prerequisite = { focus = KMX_war_venesuela }
		x = 0
		y = 1
		relative_position_id = KMX_war_venesuela

		cost = 10

		ai_will_do = {
			factor = 100
		}

		available = {
			PRU = {
			    has_government = fascism
			}	
		}

		bypass = {
			PRU = {
			    OR = {
				    NOT = { has_government = fascism }
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = PRU
			NOT = { country_exists = PRU }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
                type = annex_everything
                target = PRU
            }
		}
		will_lead_to_war_with = PRU
	}
	
	focus = {
		id = KMX_return_to_kremlin
		icon = focus_ger_strike_at_the_source
		prerequisite = { focus = KMX_war_peru }
		x = 0
		y = 1
		relative_position_id = KMX_war_peru

		cost = 10

		ai_will_do = {
			factor = 100
		}

		bypass = {
			SOV = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = SOV
			NOT = { country_exists = SOV }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = SOV
			}
			add_tech_bonus = {
				name = tooltip_socialist_marine_corps
				bonus = 1.0
				uses = 1
				category = tp_tech 
				category = marine_tech
			}
		}
		will_lead_to_war_with = SOV
	}
	
	focus = {
		id = KMX_new_mayak
		icon = GFX_focus_ger_great_red_menace
		prerequisite = { focus = KMX_new_konstitute }
		x = 7
		y = 1
		relative_position_id = KMX_new_konstitute
		mutually_exclusive = { focus = KMX_guarantee_political_freedoms }
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_new_mayak"
			add_ideas = KMX_new_mayak
			country_event = { id = tromexico.30 }
		}
	}
	
	focus = {
		id = KMX_repression_against_bourgeoisie
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = KMX_new_mayak }
		x = -2
		y = 1
		relative_position_id = KMX_new_mayak
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_repression_against_bourgeoisie"
			add_timed_idea = { idea = KMX_repression_against_bourgeoisie_idea days = 90 }
		}
	}
	
	focus = {
		id = KMX_timed_militarisation
		icon = GFX_focus_generic_little_entente
		prerequisite = { focus = KMX_repression_against_bourgeoisie }
		x = 0
		y = 1
		relative_position_id = KMX_repression_against_bourgeoisie
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_timed_militarisation"
			add_ideas = KMX_timed_militarisation_idea
		}
	}
	
	focus = {
		id = KMX_role_of_party
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = KMX_new_mayak }
		x = 2
		y = 1
		relative_position_id = KMX_new_mayak
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_role_of_party"
			add_stability = 0.05
		}
	}
	
	focus = {
		id = KMX_legalization_of_factions
		icon = GFX_goal_generic_political_pressure
		prerequisite = { focus = KMX_role_of_party }
		x = 0
		y = 1
		relative_position_id = KMX_role_of_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_legalization_of_factions"
			add_ideas = KMX_legalization_of_factions_idea
		}
	}
	
	focus = {
		id = KMX_create_sovnarkom
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = KMX_new_mayak }
		x = 0
		y = 1
		relative_position_id = KMX_new_mayak
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_create_sovnarkom"
			add_political_power = 100
		}
	}
	
	focus = {
		id = KMX_four_international
		icon = GFX_goal_support_fourth_int
		prerequisite = { focus = KMX_create_sovnarkom }
		x = 0
		y = 1
		relative_position_id = KMX_create_sovnarkom
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 25
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_four_international"
			set_rule = { can_create_factions = yes }
			create_faction = "four_international_faction"
			set_global_flag = four_inter_flag
			hidden_effect = { news_event = { id = trworldnews.20 } }
		}
	}
	
	focus = {
		id = intern_nauka
		icon = GFX_goal_tfv_generic_tech_sharing
		cost = 10
		prerequisite = {
			focus = KMX_four_international
		}
		x = -2
		y = 1
		relative_position_id = KMX_four_international
		
		ai_will_do = {
			factor = 25
		}
		
		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus intern_nauka"
			KMX = { add_to_tech_sharing_group = tro_research }
			
			every_other_country = {
				limit = {
					AND = {
						is_in_faction_with = KMX
						is_faction_leader = no
					}
				}
				add_to_tech_sharing_group = tro_research
				set_country_flag = in_intern_nauka
			}
		}
	}
	
	focus = {
		id = four_inter_snab
		icon = GFX_goal_generic_trade
		cost = 10
		prerequisite = {
			focus = KMX_four_international
		}
		x = 2
		y = 1
		relative_position_id = KMX_four_international
		
		ai_will_do = {
			factor = 25
		}
		
		available = {
			ROOT = {
				is_faction_leader = yes
			}
		}
		
		completion_reward = {
			ROOT = {
				add_political_power = 20
				add_ideas = four_inter_lider_snab_idea
			}
			
			every_other_country = {
				limit = {
					AND = {
						is_in_faction_with = ROOT
						is_faction_leader = no
					}
				}
				add_political_power = 20
				add_ideas = four_inter_member_snab_idea
				set_country_flag = in_intern_snab
			}
		}
	}
	
	focus = {
		id = world_rev
		icon = GFX_goal_generic_war_with_comintern
		cost = 14.20
		prerequisite = {
			focus = KMX_four_international
		}
		x = 0
		y = 1
		relative_position_id = KMX_four_international

		ai_will_do = {
			factor = 15
		}

		available_if_capitulated = yes

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus world_rev"
			add_political_power = -100
			swap_ideas = {
				remove_idea = KMX_new_mayak
				add_idea = KMX_new_mayak2
			}
			
		}
	}
	
	focus = {
		id = KMX_drift_trozkism_in_usa
		icon = GFX_focus_eng_crush_the_dream
		prerequisite = { focus = world_rev }
		x = -2
		y = 1
		relative_position_id = world_rev

		cost = 10

		ai_will_do = {
			factor = 100
		}

        available = {
			USA = {
            	OR  = {
    				has_idea = great_depression
					has_idea = great_depression_2
					has_idea = great_depression_3
			    }
			}    
		}
		
		bypass = {
			USA = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = USA
			NOT = { country_exists = USA }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_drift_trozkism_in_usa"
		    add_ideas = KMX_plotting_revolution_is_usa
			USA = {
			    add_ideas = KMX_usa_trozkism_drift
			}	
		}
	}
	
	focus = {
		id = KMX_support_american_revolutioners
		icon = GFX_focus_eng_crush_the_dream
		prerequisite = { focus = KMX_drift_trozkism_in_usa }
		x = 0
		y = 1
		relative_position_id = KMX_drift_trozkism_in_usa

		cost = 10

		ai_will_do = {
			factor = 100
		}

        available = {   
		}
		
		bypass = {
			USA = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = USA
			NOT = { country_exists = USA }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_support_american_revolutioners"
		    custom_effect_tooltip = KMX_support_american_revolutioners_tt
		}
	}
	
	focus = {
		id = KMX_support_texas_revolutioners
		icon = GFX_focus_eng_crush_the_dream
		prerequisite = { focus = world_rev }
		x = 0
		y = 1
		relative_position_id = world_rev

		cost = 10

		ai_will_do = {
			factor = 100
		}

        available = {   
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_support_texas_revolutioners"
		    custom_effect_tooltip = KMX_support_texas_revolutioners_tt
		}
	}
	
	focus = {
		id = KMX_support_californian_revolutioners
		icon = GFX_focus_eng_crush_the_dream
		prerequisite = { focus = KMX_support_texas_revolutioners }
		x = 0
		y = 1
		relative_position_id = KMX_support_texas_revolutioners

		cost = 10

		ai_will_do = {
			factor = 100
		}

        available = {   
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_support_californian_revolutioners"
		    custom_effect_tooltip = KMX_support_californian_revolutioners_tt
		}
	}
	
	focus = {
		id = KMX_american_revolution
		icon = GFX_focus_generic_strike_at_democracy3
		prerequisite = { focus = KMX_support_american_revolutioners focus = KMX_support_californian_revolutioners }
		x = 0
		y = 1
		relative_position_id = KMX_support_californian_revolutioners

		cost = 10

		ai_will_do = {
			factor = 100
		}

        available = {   
		}
		
		bypass = {
			USA = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = USA
			NOT = { country_exists = USA }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_support_californian_revolutioners"
		    
			declare_war_on = {
				target = USA
				type = annex_everything
			}
			
        	if = {
				limit = { 
			    	KMX = {
				    	has_completed_focus = KMX_support_american_revolutioners					
	       	    	}
				}
				USA = { country_event = { id = tromexico.28 } }
			}	

            if = {
				limit = { 
			    	KMX = {
				    	has_completed_focus = KMX_support_californian_revolutioners				
	       	    	}
				}
				USA = { country_event = { id = tromexico.29 } }
			}		
		}
	}
	
	focus = {
		id = KMX_march_southwards
		icon = GFX_goal_generic_major_war
		prerequisite = {
			focus = world_rev
		}
		x = 2
		y = 1
		relative_position_id = world_rev

		cost = 10

		ai_will_do = {
			factor = 100
		}

		available = {
			
		}

		bypass = {
			
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			add_named_threat = {
				threat = 4
				name = threat_mexico_marching_southwards
			}
			every_state = {
				limit = {
					OR = {
						is_core_of = GUA
						is_core_of = HON
						is_core_of = ELS
						state = 311 # British Honduras
						is_core_of = NIC
						is_core_of = COS
						is_core_of = PAN
						state = 685 # Panama Canal
					}
					NOT = {
						is_core_of = ROOT
					}
				}
				add_claim_by = ROOT
			}
            if = {
            	limit = {
            		GUA = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = puppet_wargoal_focus
                    target = GUA
                }
            }
            if = {
            	limit = {
            		HON = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = puppet_wargoal_focus
                    target = HON
                }
            }
            if = {
            	limit = {
            		ELS = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = puppet_wargoal_focus
                    target = ELS
                }
            }
			if = {
            	limit = {
            		NIC = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = puppet_wargoal_focus
                    target = NIC
                }
            }
            if = {
            	limit = {
            		COS = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = puppet_wargoal_focus
                    target = COS
                }
            }
            if = {
            	limit = {
            		PAN = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = puppet_wargoal_focus
                    target = PAN
                }
            }
		}
		will_lead_to_war_with = GUA
		will_lead_to_war_with = HON
		will_lead_to_war_with = ELS
		will_lead_to_war_with = NIC
		will_lead_to_war_with = COS
		will_lead_to_war_with = PAN
	}
	
	focus = {
		id = KMX_revolution_in_columbia
		icon = GFX_goal_generic_major_war
		prerequisite = { focus = KMX_march_southwards }
		x = 0
		y = 1
		relative_position_id = KMX_march_southwards

		cost = 10

		ai_will_do = {
			factor = 100
		}

		bypass = {
			COL = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = COL
			NOT = { country_exists = COL }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
                type = puppet_wargoal_focus
                target = COL
            }
		}
		will_lead_to_war_with = COL
	}
	
	focus = {
		id = KMX_revolution_in_venesuela
		icon = GFX_goal_generic_occupy_states_ongoing_war
		prerequisite = { focus = KMX_revolution_in_columbia }
		x = 0
		y = 1
		relative_position_id = KMX_revolution_in_columbia

		cost = 10

		ai_will_do = {
			factor = 100
		}

		bypass = {
			VEN = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = VEN
			NOT = { country_exists = VEN }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
                type = puppet_wargoal_focus
                target = VEN
            }
		}
		will_lead_to_war_with = VEN
	}
	
	focus = {
		id = KMX_revolution_in_peru
		icon = GFX_goal_generic_attack_allies
		prerequisite = { focus = KMX_revolution_in_venesuela }
		x = 0
		y = 1
		relative_position_id = KMX_revolution_in_venesuela

		cost = 10

		ai_will_do = {
			factor = 100
		}

		bypass = {
			PRU = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = PRU
			NOT = { country_exists = PRU }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
                type = puppet_wargoal_focus
                target = PRU
            }
		}
		will_lead_to_war_with = PRU
	}
	
	
	focus = {
		id = KMX_new_soviet_union
		prerequisite = { focus = KMX_revolution_in_peru }
		prerequisite = { focus = KMX_american_revolution }
		icon = GFX_focus_prc_agrarian_socialism
		x = -2
		y = 1
		relative_position_id = KMX_revolution_in_peru
		cost = 10
		completion_reward = {
		    set_cosmetic_tag = MEX_SOV
		}
	}
	
	
	focus = {
		id = KMX_confrontation_with_ussr
		icon = GFX_focus_ger_bulwark_against_bolshevism
		cost = 10.00
		prerequisite = {
			focus = KMX_new_konstitute
		}
		x = 0
		y = 7
		relative_position_id = KMX_new_konstitute
		
		ai_will_do = {
			factor = 20
		}
		
		available_if_capitulated = yes
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_confrontation_with_ussr"
			add_war_support = 0.05
			
			add_opinion_modifier = { target = SOV modifier = KMX_confrontation_with_ussr }
			SOV = { add_opinion_modifier = { target = ROOT modifier = KMX_confrontation_with_mexico } }
		}
	}
	
	focus = {
		id = KMX_revolution_in_japan
		icon = GFX_focus_attack_japan
		cost = 10.00
		prerequisite = {
			focus = KMX_confrontation_with_ussr
		}
		x = -4
		y = 1
		relative_position_id = KMX_confrontation_with_ussr
		mutually_exclusive = { focus = KMX_cooperation_with_japan }
		
		ai_will_do = {
			factor = 15
		}
		
		available_if_capitulated = yes
		
		bypass = {
			JAP = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = JAP
			NOT = { country_exists = JAP }
		}
		
		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_revolution_in_japan"
			create_wargoal = {
                type = puppet_wargoal_focus
                target = JAP
            }
		}
		will_lead_to_war_with = JAP
	}
	
	focus = {
		id = KMX_cooperation_with_japan
		icon = GFX_focus_chi_collaboration_with_the_japanese
		cost = 10.00
		prerequisite = {
			focus = KMX_confrontation_with_ussr
		}
		x = -2
		y = 1
		relative_position_id = KMX_confrontation_with_ussr
		mutually_exclusive = { focus = KMX_revolution_in_japan }
		
		ai_will_do = {
			factor = 20
		}
		
		available_if_capitulated = yes
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_cooperation_with_japan"
			
		}
	}
	
	focus = {
		id = KMX_cooperation_with_britain
		icon = GFX_focus_ger_bulwark_against_bolshevism
		cost = 10
		prerequisite = {
			focus = KMX_confrontation_with_ussr
		}
		x = 2
		y = 1
		relative_position_id = KMX_confrontation_with_ussr
		mutually_exclusive = { focus = KMX_revolution_in_canada }
		
		ai_will_do = {
			factor = 20
		}
		
		available_if_capitulated = yes
		
		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_cooperation_with_britain"
			
		}
	}
	
	focus = {
		id = KMX_revolution_in_canada
		icon = GFX_focus_attack_canada
		cost = 10.00
		prerequisite = {
			focus = KMX_confrontation_with_ussr
		}
		prerequisite = {
			focus = KMX_american_revolution
		}
		x = 4
		y = 1
		relative_position_id = KMX_confrontation_with_ussr
		mutually_exclusive = { focus = KMX_cooperation_with_britain }
		
		ai_will_do = {
			factor = 15
		}
		
		available_if_capitulated = yes
		
		bypass = {
			CAN = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = CAN
			NOT = { country_exists = CAN }
		}
		
		completion_reward = {
		    log = "[GetDateText]: [Root.GetName]: Focus KMX_revolution_in_japan"
			create_wargoal = {
                type = puppet_wargoal_focus
                target = CAN
            }
		}
		will_lead_to_war_with = CAN
	}
	
	focus = {
		id = KMX_war_with_ussr 
		prerequisite = { focus = KMX_confrontation_with_ussr }
		prerequisite = { focus = KMX_return_to_kremlin focus = KMX_new_soviet_union }
		bypass = {
			SOV = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = SOV
			NOT = { country_exists = SOV }
		}
		will_lead_to_war_with = SOV
		icon = GFX_focus_attack_soviet
		x = 0
		y = 3
		relative_position_id = KMX_confrontation_with_ussr
		cost = 10
		completion_reward = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = SOV
				expire = 0
			} 
		}
	}
	
	focus = {
		id = KMX_reform_deformated_state 
		prerequisite = { focus = KMX_war_with_ussr }
		
		icon = GFX_goal_generic_national_unity
		x = 0
		y = 1
		relative_position_id = KMX_war_with_ussr
		cost = 10
		completion_reward = {
			add_political_power = 200
		}
	}
	
	focus = {
		id = KMX_war_with_poland
		prerequisite = { focus = KMX_reform_deformated_state }
		
		icon = GFX_goal_generic_territory_or_war
		x = 0
		y = 1
		relative_position_id = KMX_reform_deformated_state
		cost = 10
		bypass = {
			POL = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = POL
			NOT = { country_exists = POL }
		}
		will_lead_to_war_with = POL
		completion_reward = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = POL
				expire = 0
			} 
		}
	}
	
	focus = {
		id = KMX_war_with_germany
		prerequisite = { focus = KMX_war_with_poland }
		
		icon = GFX_focus_attack_germany
		x = 0
		y = 1
		relative_position_id = KMX_war_with_poland
		cost = 10
		bypass = {
			GER = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = GER
			NOT = { country_exists = GER }
		}
		will_lead_to_war_with = GER
		completion_reward = {
			create_wargoal = {
				type = puppet_wargoal_focus
				target = GER
				expire = 0
			} 
		}
	}
	
	focus = {
		id = KMX_world_propaganda
		prerequisite = { focus = KMX_war_with_germany }
		
		icon = GFX_focus_ger_great_red_menace
		x = -2
		y = 1
		relative_position_id = KMX_war_with_germany
		cost = 10
		completion_reward = {
		
		}
	}
	
	focus = {
		id = KMX_go_to_west
		prerequisite = { focus = KMX_war_with_germany }
		
		icon = GFX_focus_usa_focus_on_europe
		x = 0
		y = 1
		relative_position_id = KMX_war_with_germany
		cost = 10
		completion_reward = {
			if = {
            	limit = {
            		FRA = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = annex_everything
                    target = FRA
                }
            }
            if = {
            	limit = {
            		HOL = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = annex_everything
                    target = HOL
                }
            }
            if = {
            	limit = {
            		BEL = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = puppet_wargoal_focus
                    target = BEL
                }
            }
			if = {
            	limit = {
            		LUX = {
						exists = yes
            			NOT = {
            				OR = {
            					is_in_faction_with = ROOT
                            	is_subject_of = ROOT
            				}
            			}
            		}
            	}
            	create_wargoal = {
                    type = puppet_wargoal_focus
                    target = LUX
                }
            }
		}
	}
	
	focus = {
		id = KMX_mobilize_means_of_production
		prerequisite = { focus = KMX_war_with_germany }
		
		icon = GFX_focus_generic_tank_production
		x = 2
		y = 1
		relative_position_id = KMX_war_with_germany
		cost = 10
		bypass = {
			GER = {
			    OR = {
					is_in_faction_with = ROOT
                    is_subject_of = ROOT
				}	
			}
			has_war_with = GER
			NOT = { country_exists = GER }
		}
		will_lead_to_war_with = GER
		completion_reward = {
			add_ideas = KMX_mobilize_means_of_production_idea
		}
	}
	
	focus = {
		id = KMX_reorg_econom
		icon = GFX_z_goal_production
		cost = 10.00
		prerequisite = {
			focus = KMX_new_konstitute
		}
		x = 0
		y = 1
		relative_position_id = KMX_new_konstitute
		
		ai_will_do = {
			factor = 20
		}
		
		available_if_capitulated = yes
		
		completion_reward = {
			swap_ideas = {
				remove_idea = kmx_econom_dno_1
				add_idea = kmx_econom_dno_2
			}
			hidden_effect = {
				add_ai_strategy = {
					type = role_ratio
					id = mobile
					value = 20
				}
				add_ai_strategy = {
					type = role_ratio
					id = infantry
					value = 30
				}
				add_ai_strategy = {
					type = build_army
					id = cavalry
					value = 100
				}
				add_ai_strategy = {
					type = build_army
					id = infantry
					value = 5000
				}
				add_ai_strategy = {
					type = build_army
					id = anti_tank
					value = 100
				}
				add_ai_strategy = {
					type = build_army
					id = mobile
					value = 100
				}
				add_ai_strategy = {
					type = build_army
					id = armor
					value = 100
				}
				add_ai_strategy = {
					type = build_army
					id = mountaineer
					value = 50
				}
			}
		}
	}
	
	focus = {
		id = KMX_3_years_plan
		icon = GFX_goal_generic_soviet_construction
		cost = 7.10
		prerequisite = {
			focus = KMX_reorg_econom
		}
		
		x = 0
		y = 1
		relative_position_id = KMX_reorg_econom

		ai_will_do = {
			factor = 30
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = tri_plan_idea
			swap_ideas = {
				remove_idea = kmx_econom_dno_2
				add_idea = kmx_econom_dno_3
			}
		}
	}
	
	focus = {
		id = KMX_nationalise_railways
		icon = GFX_goal_generic_production2
		prerequisite = { focus = KMX_3_years_plan }
		x = 0
		y = 1
		relative_position_id = KMX_3_years_plan

		cost = 7.2

		bypass = {
			custom_trigger_tooltip = {
				tooltip = infrastructure_effort_tt
				all_owned_state = {			
					free_building_slots = {
						building = infrastructure
						size < 1
					}
				}
			}
		}

		complete_tooltip = {
			add_political_power = -50
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = infrastructure
				level = 1
				instant_build = yes
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus KMX_nationalise_railways"
			277 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			477 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = KMX_res1
		icon = GFX_goal_generic_construction2
		cost = 10.00
		prerequisite = {
			focus = KMX_nationalise_railways
		}
		x = -2
		y = 1
		relative_position_id = KMX_nationalise_railways
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		
		available = {
			controls_state = 479
		}

		completion_reward = {
			add_political_power = 40
			add_resource = {
				type = tungsten
				amount = 10
				state = 479
			}
			add_resource = {
				type = steel
				amount = 15
				state = 479
			}
		}
	}
	
	focus = {
		id = era_radio
		icon = GFX_goal_generic_propaganda
		cost = 10.00
		prerequisite = {
			focus = KMX_res1
		}
		x = 0
		y = 1
		relative_position_id = KMX_res1

		available_if_capitulated = yes
		
		available = {
			is_subject = no
		}
		
		ai_will_do = {
			factor = 20
		}
		
		completion_reward = {
			add_political_power = 50
			add_stability = 0.1
		}
	}
	
	focus = {
		id = KMX_nauka
		icon = GFX_focus_generic_socialist_science
		cost = 10.00
		prerequisite = {
			focus = era_radio
		}
		x = 0
		y = 1
		relative_position_id = era_radio
		
		available_if_capitulated = yes
		
		available = {
			is_subject = no
		}
		
		ai_will_do = {
			factor = 30
		}
		
		completion_reward = {
			add_research_slot = 1
		}
	}
	
	focus = {
		id = integr_red_gvard
		icon = GFX_z_goal_socmilirarism
		cost = 10.00
		prerequisite = {
			focus = KMX_nationalise_railways
		}
		x = 0
		y = 1
		relative_position_id = KMX_nationalise_railways
		
		available_if_capitulated = yes
		
		available = {
			is_subject = no
		}
		
		ai_will_do = {
			factor = 15
		}
		
		completion_reward = {
			add_political_power = 20
			add_manpower = 20000
			custom_effect_tooltip = KMX_red_guards_tooltip
			hidden_effect = {
                load_oob = KMX_red_guards
            }
		}
	}
	
	focus = {
		id = KOB
		icon = GFX_focus_generic_soviet_politics
		cost = 7.10
		prerequisite = {
			focus = integr_red_gvard
		}
		x = 0
		y = 1
		relative_position_id = integr_red_gvard
		
		available_if_capitulated = yes
		
		available = {
			is_subject = no
		}
		
		ai_will_do = {
			factor = 20
		}
		
		completion_reward = {
			add_ideas = KOB_idea_1
		}
	}
	
	focus = {
		id = shpionaj
		icon = GFX_z_goal_secret_agents
		cost = 10.00
		prerequisite = {
			focus = KOB
		}
		x = 0
		y = 1
		relative_position_id = KOB

		available_if_capitulated = yes
		
		available = {
			is_subject = no
		}
		
		ai_will_do = {
			factor = 30
		}
	
		completion_reward = {
			swap_ideas = {
				remove_idea = KOB_idea_1
				add_idea = KOB_idea_2
			}
		}
	}
	
	focus = {
		id = promka1
		icon = GFX_z_promka_11
		cost = 5.00
		prerequisite = {
			focus = KMX_nationalise_railways
		}
		x = 2
		y = 1
		relative_position_id = KMX_nationalise_railways

		ai_will_do = {
			factor = 25
		}
		
		completion_reward = {
			add_political_power = 20
			remove_ideas = kmx_econom_dno_3
			474 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = industrial_complex
					level = 5
					instant_build = yes
				}
			}
			475 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = arms_factory
					level = 5
					instant_build = yes
				}
			}
			custom_effect_tooltip = kmx.promka1.tt
			hidden_effect = {
				country_event = { id = tromexico.9 }
			}
		}
	}
	
	focus = {
		id = promka2
		icon = GFX_z_promka_12
		cost = 5.00
		prerequisite = {
			focus = promka1
		}
		x = 0
		y = 1
		relative_position_id = promka1
		
		ai_will_do = {
			factor = 25
		}
		
		completion_reward = {
			484 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = industrial_complex
					level = 5
					instant_build = yes
				}
			}
			483 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = arms_factory
					level = 5
					instant_build = yes
				}
			}
			if = {
				limit = {
					has_country_flag = KMX_heavy_industry
				}
				swap_ideas = {
					remove_idea = KMX_heavy_industry1
					add_idea = KMX_heavy_industry2
				}
			}
			
			if = {
				limit = {
					has_country_flag = KMX_medium_industry
				}
				swap_ideas = {
					remove_idea = KMX_medium_industry1
					add_idea = KMX_medium_industry2
				}
			}
		}
    }
	
	focus = {
		id = promka_drive
		icon = GFX_z_promka_13
		cost = 5.00
		prerequisite = {
			focus = promka2
		}
		x = 0
		y = 1
		relative_position_id = promka2
		
		ai_will_do = {
			factor = 30
		}
		
		completion_reward = {
			476 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = industrial_complex
					level = 5
					instant_build = yes
				}
			}
			485 = {
				add_extra_state_shared_building_slots = 5
				add_building_construction = {
					type = arms_factory
					level = 5
					instant_build = yes
				}
			}
			if = {
				limit = {
					has_country_flag = KMX_heavy_industry
				}
				add_ideas = KMX_heavy_industry_drive
				clr_country_flag = KMX_heavy_industry
			}
			
			if = {
				limit = {
					has_country_flag = KMX_medium_industry
				}
				add_ideas = KMX_medium_industry_drive
				clr_country_flag = KMX_medium_industry
			}
			hidden_effect = {
				add_ai_strategy = {
					type = build_army
					id = cavalry
					value = 400
				}
				add_ai_strategy = {
					type = build_army
					id = infantry
					value = 1000
				}
				add_ai_strategy = {
					type = build_army
					id = anti_tank
					value = 400
				}
				add_ai_strategy = {
					type = build_army
					id = mobile
					value = 900
				}
				add_ai_strategy = {
					type = build_army
					id = armor
					value = 400
				}
				add_ai_strategy = {
					type = build_army
					id = mountaineer
					value = 50
				}
			}
		}
	}
}
