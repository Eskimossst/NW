###########################
# Migration Events
###########################

add_namespace = tmo.migration

# high_migration_growth (85-100)
country_event = {
	id = tmo.migration.1
	title = tmo.migration.1.t
	desc = tmo.migration.1.d
	picture = GFX_report_event_catastrophic_level_of_emigration
	
	mean_time_to_happen = { days = 2 }
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event tmo.migration.1" }

	trigger = {
		NOT = { has_government = anarchism }
		NOT = { has_country_flag = high_migration_growth }
		NOT = { has_country_flag = migration_block_flag }
		OR = {
			AND = {
				has_stability > 0.85
				has_idea = balanced_migration_policy
			}
			AND = {
				has_stability > 0.80
				OR = {
					has_idea = promoting_immigration
					has_idea = ease_border_control
				}
			}
			AND = {
				has_stability > 0.90
				has_idea = strengthen_border_controls
			}
		}
		surrender_progress < 0.01
		num_of_civilian_factories > 2
		amount_research_slots > 3
		capital_scope = {
			NOT = {
				has_state_category = rural
				has_state_category = pastoral
				has_state_category = small_island
				has_state_category = tiny_island
				has_state_category = wasteland
			}
		}
		NOT = { has_idea = severe_migration_control }
		NOT = { has_idea = closed_border }
	}

	option = {
		name = tmo.migration.1.a
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = high_migration_growth
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = high_migration_growth
			}
			clr_country_flag = high_level_of_emigration
		}
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = high_migration_growth
			}
			clr_country_flag = average_level_of_emigration
		}
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = high_migration_growth
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = high_migration_growth
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = high_migration_growth
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = high_migration_growth
			}
			clr_country_flag = average_migration_growth
		}
		set_country_flag = high_migration_growth
	}
}



# average_migration_growth (75-85)
country_event = {
	id = tmo.migration.2
	title = tmo.migration.2.t
	desc = tmo.migration.2.d
	picture = GFX_report_event_average_migration_growth
	
	mean_time_to_happen = { days = 2 }
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event tmo.migration.2" }

	trigger = {
		NOT = { has_country_flag = migration_block_flag }
		if = {
			limit = { has_government = anarchism }
			has_idea = promoting_immigration
		}
		NOT = { has_country_flag = average_migration_growth }
		OR = {
			AND = {
				surrender_progress < 0.01
				num_of_civilian_factories > 2
				amount_research_slots > 2
				capital_scope = {
					NOT = {
						has_state_category = rural
						has_state_category = pastoral
						has_state_category = small_island
						has_state_category = tiny_island
						has_state_category = wasteland
					}
				}
				OR = {
					AND = {
						has_stability > 0.75
						has_stability < 0.849
						has_idea = balanced_migration_policy
					}
					AND = {
						has_stability > 0.70
						has_stability < 0.799
						OR = {
							has_idea = promoting_immigration
							has_idea = ease_border_control
						}
					}
					AND = {
						has_stability > 0.80
						has_stability < 0.899
						has_idea = strengthen_border_controls
					}
				}
			}
			AND = {
				OR = {
					surrender_progress > 0.01
					num_of_civilian_factories < 3
					amount_research_slots < 3
					capital_scope = {
						OR = {
							has_state_category = rural
							has_state_category = pastoral
							has_state_category = small_island
							has_state_category = tiny_island
							has_state_category = wasteland
						}
					}
				}
				OR = {
					AND = {
						has_stability > 0.75
						has_idea = balanced_migration_policy
					}
					AND = {
						has_stability > 0.70
						OR = {
							has_idea = promoting_immigration
							has_idea = ease_border_control
						}
					}
					AND = {
						has_stability > 0.80
						has_idea = strengthen_border_controls
					}
				}
			}
		}
		NOT = { has_idea = severe_migration_control }
		NOT = { has_idea = closed_border }
	}


	option = { #Всё хорошо
		name = tmo.migration.2.a
		trigger = {
			OR = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
				has_country_flag = average_level_of_emigration
				has_country_flag = low_level_of_emigration
				has_country_flag = normal_level_of_migration
				has_country_flag = low_migration_growth
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = average_migration_growth
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = average_migration_growth
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = average_migration_growth
			}
			clr_country_flag = average_level_of_emigration
		}
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = average_migration_growth
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = average_migration_growth
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = average_migration_growth
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = average_migration_growth
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = average_migration_growth
	}
	
	option = { #Всё плохо
		name = tmo.migration.2.b
		
		trigger = {
			NOT = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
				has_country_flag = average_level_of_emigration
				has_country_flag = low_level_of_emigration
				has_country_flag = normal_level_of_migration
				has_country_flag = low_migration_growth
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = average_migration_growth
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = average_migration_growth
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = average_migration_growth
			}
			clr_country_flag = average_level_of_emigration
		}
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = average_migration_growth
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = average_migration_growth
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = average_migration_growth
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = average_migration_growth
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = average_migration_growth
	}
}


# low_migration_growth (60-75)
country_event = {
	id = tmo.migration.3
	title = tmo.migration.3.t
	desc = tmo.migration.3.d
	picture = GFX_report_event_low_migration_growth
	
	mean_time_to_happen = { days = 2 }
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event tmo.migration.3" }

	trigger = {
		NOT = { has_country_flag = migration_block_flag }
		NOT = { has_country_flag = low_migration_growth }
		OR = {
			AND = {
				has_stability > 0.60
				has_stability < 0.749
				has_idea = balanced_migration_policy
			}
			AND = {
				has_stability > 0.55
				has_stability < 0.699
				has_idea = promoting_immigration
			}
			AND = {
				has_stability > 0.60
				has_stability < 0.699
				has_idea = ease_border_control
			}
			AND = {
				has_stability > 0.60
				has_stability < 0.799
				has_idea = strengthen_border_controls
			}
			AND = {
				has_stability > 0.60
				has_idea = severe_migration_control
			}
		}
		NOT = { has_idea = closed_border }
	}

	option = { #Ситуация улучшилась
		name = tmo.migration.3.a
		
		trigger = {
			OR = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
				has_country_flag = average_level_of_emigration
				has_country_flag = low_level_of_emigration
				has_country_flag = normal_level_of_migration
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = low_migration_growth
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = low_migration_growth
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = low_migration_growth
			}
			clr_country_flag = average_level_of_emigration
		}
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = low_migration_growth
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = low_migration_growth
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = low_migration_growth
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = low_migration_growth
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = low_migration_growth
	}
	
	option = {
		name = tmo.migration.3.b
		
		trigger = {
			NOT = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
				has_country_flag = average_level_of_emigration
				has_country_flag = low_level_of_emigration
				has_country_flag = normal_level_of_migration
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = low_migration_growth
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = low_migration_growth
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = low_migration_growth
			}
			clr_country_flag = average_level_of_emigration
		}
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = low_migration_growth
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = low_migration_growth
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = low_migration_growth
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = low_migration_growth
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = low_migration_growth
	}
}


# normal_level_of_migration (45-60)
country_event = {
	id = tmo.migration.4
	title = tmo.migration.4.t
	desc = tmo.migration.4.d
	picture = GFX_report_event_normal_level_of_migration
	
	mean_time_to_happen = { days = 2 }
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event tmo.migration.4" }

	trigger = {
		NOT = { has_country_flag = migration_block_flag }
		NOT = { has_country_flag = normal_level_of_migration }
		OR = {
			AND = {
				has_stability > 0.45
				has_stability < 0.599
				OR = {
					has_idea = balanced_migration_policy
					has_idea = ease_border_control
					has_idea = strengthen_border_controls
					has_idea = severe_migration_control
				}
			}
			AND = {
				has_stability > 0.40
				has_stability < 0.549
				has_idea = promoting_immigration
			}
			has_idea = closed_border
		}
	}

	option = {
		name = tmo.migration.4.a
		
		trigger = {
			OR = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
				has_country_flag = average_level_of_emigration
				has_country_flag = low_level_of_emigration
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = normal_level_of_migration
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = normal_level_of_migration
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = normal_level_of_migration
			}
			clr_country_flag = average_level_of_emigration
		}
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = normal_level_of_migration
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = normal_level_of_migration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = normal_level_of_migration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = normal_level_of_migration
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = normal_level_of_migration
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = normal_level_of_migration
	}
	
	option = {
		name = tmo.migration.4.b
		
		trigger = {
			NOT = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
				has_country_flag = average_level_of_emigration
				has_country_flag = low_level_of_emigration
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = normal_level_of_migration
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = normal_level_of_migration
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = normal_level_of_migration
			}
			clr_country_flag = average_level_of_emigration
		}
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = normal_level_of_migration
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = normal_level_of_migration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = normal_level_of_migration
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = normal_level_of_migration
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = normal_level_of_migration
	}
}


# low_level_of_emigration (35-45)
country_event = {
	id = tmo.migration.5
	title = tmo.migration.5.t
	desc = tmo.migration.5.d
	picture = GFX_report_event_average_migration_growth
	
	mean_time_to_happen = { days = 2 }
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event tmo.migration.5" }

	trigger = {
		NOT = { has_country_flag = migration_block_flag }
		NOT = { has_country_flag = low_level_of_emigration }
		OR = {
			AND = {
				has_stability > 0.35
				has_stability < 0.449
				has_idea = balanced_migration_policy
			}
			AND = {
				has_stability > 0.30
				has_stability < 0.399
				has_idea = promoting_immigration
			}
			AND = {
				has_stability > 0.40
				has_stability < 0.449
				has_idea = ease_border_control
			}
			AND = {
				has_stability > 0.30
				has_stability < 0.449
				has_idea = strengthen_border_controls
			}
			AND = {
				has_stability < 0.449
				has_idea = severe_migration_control
			}
		}
		NOT = { has_idea = closed_border }
	}

	option = {
		name = tmo.migration.5.a
		
		trigger = {
			OR = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
				has_country_flag = average_level_of_emigration
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = low_level_of_emigration
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = low_level_of_emigration
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = low_level_of_emigration
			}
			clr_country_flag = average_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = low_level_of_emigration
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = low_level_of_emigration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = low_level_of_emigration
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = low_level_of_emigration
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = low_level_of_emigration
	}
	
	option = {
		name = tmo.migration.5.b
		
		trigger = {
			NOT = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
				has_country_flag = average_level_of_emigration
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = low_level_of_emigration
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = low_level_of_emigration
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = low_level_of_emigration
			}
			clr_country_flag = average_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = low_level_of_emigration
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = low_level_of_emigration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = low_level_of_emigration
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = low_level_of_emigration
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = low_level_of_emigration
	}
}


# average_level_of_emigration (20-35)
country_event = {
	id = tmo.migration.6
	title = tmo.migration.6.t
	desc = tmo.migration.6.d
	picture = GFX_report_event_average_level_of_emigration
	
	mean_time_to_happen = { days = 2 }
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event tmo.migration.6" }

	trigger = {
		NOT = { has_country_flag = migration_block_flag }
		NOT = { has_country_flag = average_level_of_emigration }
		OR = {
			AND = {
				has_stability > 0.20
				has_stability < 0.349
				has_idea = balanced_migration_policy
			}
			AND = {
				has_stability > 0.15
				has_stability < 0.299
				OR = {
					has_idea = promoting_immigration
					has_idea = strengthen_border_controls
				}
			}
			AND = {
				has_stability > 0.25
				has_stability < 0.399
				has_idea = ease_border_control
			}
		}
		NOT = { has_idea = severe_migration_control }
		NOT = { has_idea = closed_border }
	}

	option = {
		name = tmo.migration.6.a
		trigger = {
			OR = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = average_level_of_emigration
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = average_level_of_emigration
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = average_level_of_emigration
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = average_level_of_emigration
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = average_level_of_emigration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = average_level_of_emigration
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = average_level_of_emigration
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = average_level_of_emigration
	}
	
	option = {
		name = tmo.migration.6.b
		trigger = {
			NOT = {
				has_country_flag = catastrophic_level_of_emigration
				has_country_flag = high_level_of_emigration
			}
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = average_level_of_emigration
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = average_level_of_emigration
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = average_level_of_emigration
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = average_level_of_emigration
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = average_level_of_emigration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = average_level_of_emigration
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = average_level_of_emigration
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = average_level_of_emigration
	}
}

# high_level_of_emigration (10-20)
country_event = {
	id = tmo.migration.7
	title = tmo.migration.7.t
	desc = tmo.migration.7.d
	picture = GFX_report_event_high_level_of_emigration
	
	mean_time_to_happen = { days = 2 }
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event tmo.migration.7" }

	trigger = {
		NOT = { has_country_flag = migration_block_flag }
		NOT = { has_country_flag = high_level_of_emigration }
		OR = {
			AND = {
				has_stability > 0.1
				has_stability < 0.199
				has_idea = balanced_migration_policy
			}
			AND = {
				has_stability > 0.1
				has_stability < 0.149
				has_idea = promoting_immigration
			}
			AND = {
				has_stability > 0.05
				has_stability < 0.149
				has_idea = promoting_immigration
			}
			AND = {
				has_stability > 0.15
				has_stability < 0.249
				has_idea = ease_border_control
			}
		}
		NOT = { has_idea = severe_migration_control }
		NOT = { has_idea = closed_border }
	}

	option = {
		name = tmo.migration.7.a
		trigger = {
			has_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = high_level_of_emigration
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = high_level_of_emigration
			}
			clr_country_flag = average_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = high_level_of_emigration
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = high_level_of_emigration
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = high_level_of_emigration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = high_level_of_emigration
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = high_level_of_emigration
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = high_level_of_emigration
	}
	
	option = {
		name = tmo.migration.7.b
		trigger = {
			NOT = { has_country_flag = catastrophic_level_of_emigration }
		}
		
		if = {
			limit = {
				has_idea = catastrophic_level_of_emigration
			}
			swap_ideas = {
				remove_idea = catastrophic_level_of_emigration
				add_idea = high_level_of_emigration
			}
			clr_country_flag = catastrophic_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = high_level_of_emigration
			}
			clr_country_flag = average_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = high_level_of_emigration
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = high_level_of_emigration
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = high_level_of_emigration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = high_level_of_emigration
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = high_level_of_emigration
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = high_level_of_emigration
	}
}
#0-10
country_event = {
	id = tmo.migration.8
	title = tmo.migration.8.t
	desc = tmo.migration.8.d
	picture = GFX_report_event_catastrophic_level_of_emigration
	
	mean_time_to_happen = { days = 2 }
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event tmo.migration.8" }

	trigger = {
		NOT = { has_country_flag = migration_block_flag }
		NOT = { has_country_flag = catastrophic_level_of_emigration }
		OR = {
			AND = {
				has_stability < 0.099
				OR = {
					has_idea = balanced_migration_policy
					has_idea = promoting_immigration
				}
			}
			AND = {
				has_stability < 0.049
				has_idea = strengthen_border_controls
			}
			AND = {
				has_stability < 0.149
				has_idea = ease_border_control
			}
		}
		NOT = { has_idea = severe_migration_control }
		NOT = { has_idea = closed_border }
	}
	
	option = {
		name = tmo.migration.8.a
		
		if = {
			limit = {
				has_idea = average_level_of_emigration
			}
			swap_ideas = {
				remove_idea = average_level_of_emigration
				add_idea = catastrophic_level_of_emigration
			}
			clr_country_flag = average_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = high_level_of_emigration
			}
			swap_ideas = {
				remove_idea = high_level_of_emigration
				add_idea = catastrophic_level_of_emigration
			}
			clr_country_flag = high_level_of_emigration
		}
		
		if = {
			limit = {
				has_idea = low_level_of_emigration
			}
			swap_ideas = {
				remove_idea = low_level_of_emigration
				add_idea = catastrophic_level_of_emigration
			}
			clr_country_flag = low_level_of_emigration
		}
		if = {
			limit = {
				has_idea = normal_level_of_migration
			}
			swap_ideas = {
				remove_idea = normal_level_of_migration
				add_idea = catastrophic_level_of_emigration
			}
			clr_country_flag = normal_level_of_migration
		}
		if = {
			limit = {
				has_idea = low_migration_growth
			}
			swap_ideas = {
				remove_idea = low_migration_growth
				add_idea = catastrophic_level_of_emigration
			}
			clr_country_flag = low_migration_growth
		}
		if = {
			limit = {
				has_idea = average_migration_growth
			}
			swap_ideas = {
				remove_idea = average_migration_growth
				add_idea = catastrophic_level_of_emigration
			}
			clr_country_flag = average_migration_growth
		}
		if = {
			limit = {
				has_idea = high_migration_growth
			}
			swap_ideas = {
				remove_idea = high_migration_growth
				add_idea = catastrophic_level_of_emigration
			}
			clr_country_flag = high_migration_growth
		}
		set_country_flag = catastrophic_level_of_emigration
	}
}

# Hidden Set Normal migration
country_event = {
	id = tmo.migration.9
	title = tmo.migration.9.t
	desc = tmo.migration.9.d
	picture = GFX_report_event_generic_rally_3
	hidden = yes
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event TRlegitimacy.9" }

	option = {
		name = tmo.migration.9.a
		
		clear_migration_flag = yes
		remove_ideas = {
			catastrophic_level_of_emigration
			high_level_of_emigration
			average_level_of_emigration
			low_level_of_emigration
			normal_level_of_migration
			low_migration_growth
			average_migration_growth
			high_migration_growth
		}
		if = {
			limit = {
				NOT = { has_government = anarchism }
				NOT = { has_country_flag = high_migration_growth }
				OR = {
					AND = {
						has_stability > 0.85
						has_idea = balanced_migration_policy
					}
					AND = {
						has_stability > 0.80
						OR = {
							has_idea = promoting_immigration
							has_idea = ease_border_control
						}
					}
					AND = {
						has_stability > 0.90
						has_idea = strengthen_border_controls
					}
				}
				surrender_progress < 0.01
				num_of_civilian_factories > 2
				amount_research_slots > 3
				capital_scope = {
					NOT = {
						has_state_category = rural
						has_state_category = pastoral
						has_state_category = small_island
						has_state_category = tiny_island
						has_state_category = wasteland
					}
				}
				NOT = { has_idea = severe_migration_control }
				NOT = { has_idea = closed_border }
			}
			add_ideas = high_migration_growth
			set_country_flag = high_migration_growth
		}
		else_if = {
			limit = {
				if = {
					limit = { has_government = anarchism }
					has_idea = promoting_immigration
				}
				NOT = { has_country_flag = average_migration_growth }
				OR = {
					AND = {
						surrender_progress < 0.01
						num_of_civilian_factories > 2
						amount_research_slots > 2
						capital_scope = {
							NOT = {
								has_state_category = rural
								has_state_category = pastoral
								has_state_category = small_island
								has_state_category = tiny_island
								has_state_category = wasteland
							}
						}
						OR = {
							AND = {
								has_stability > 0.75
								has_stability < 0.849
								has_idea = balanced_migration_policy
							}
							AND = {
								has_stability > 0.70
								has_stability < 0.799
								OR = {
									has_idea = promoting_immigration
									has_idea = ease_border_control
								}
							}
							AND = {
								has_stability > 0.80
								has_stability < 0.899
								has_idea = strengthen_border_controls
							}
						}
					}
					AND = {
						OR = {
							surrender_progress > 0.01
							num_of_civilian_factories < 3
							amount_research_slots < 3
							capital_scope = {
								OR = {
									has_state_category = rural
									has_state_category = pastoral
									has_state_category = small_island
									has_state_category = tiny_island
									has_state_category = wasteland
								}
							}
						}
						OR = {
							AND = {
								has_stability > 0.75
								has_idea = balanced_migration_policy
							}
							AND = {
								has_stability > 0.70
								OR = {
									has_idea = promoting_immigration
									has_idea = ease_border_control
								}
							}
							AND = {
								has_stability > 0.80
								has_idea = strengthen_border_controls
							}
						}
					}
				}
				NOT = { has_idea = severe_migration_control }
				NOT = { has_idea = closed_border }
			}
			add_ideas = average_migration_growth
			set_country_flag = average_migration_growth
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = low_migration_growth }
				OR = {
					AND = {
						has_stability > 0.60
						has_stability < 0.749
						has_idea = balanced_migration_policy
					}
					AND = {
						has_stability > 0.55
						has_stability < 0.699
						has_idea = promoting_immigration
					}
					AND = {
						has_stability > 0.60
						has_stability < 0.699
						has_idea = ease_border_control
					}
					AND = {
						has_stability > 0.60
						has_stability < 0.799
						has_idea = strengthen_border_controls
					}
					AND = {
						has_stability > 0.60
						has_idea = severe_migration_control
					}
				}
				NOT = { has_idea = closed_border }
			}
			add_ideas = low_migration_growth
			set_country_flag = low_migration_growth
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = low_level_of_emigration }
				OR = {
					AND = {
						has_stability > 0.35
						has_stability < 0.449
						has_idea = balanced_migration_policy
					}
					AND = {
						has_stability > 0.30
						has_stability < 0.399
						has_idea = promoting_immigration
					}
					AND = {
						has_stability > 0.40
						has_stability < 0.449
						has_idea = ease_border_control
					}
					AND = {
						has_stability > 0.30
						has_stability < 0.449
						has_idea = strengthen_border_controls
					}
					AND = {
						has_stability < 0.449
						has_idea = severe_migration_control
					}
				}
				NOT = { has_idea = closed_border }
			}
			add_ideas = low_level_of_emigration
			set_country_flag = low_level_of_emigration
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = average_level_of_emigration }
				OR = {
					AND = {
						has_stability > 0.20
						has_stability < 0.349
						has_idea = balanced_migration_policy
					}
					AND = {
						has_stability > 0.15
						has_stability < 0.299
						OR = {
							has_idea = promoting_immigration
							has_idea = strengthen_border_controls
						}
					}
					AND = {
						has_stability > 0.25
						has_stability < 0.399
						has_idea = ease_border_control
					}
				}
				NOT = { has_idea = severe_migration_control }
				NOT = { has_idea = closed_border }
			}
			add_ideas = average_level_of_emigration
			set_country_flag = average_level_of_emigration
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = high_level_of_emigration }
				OR = {
					AND = {
						has_stability > 0.1
						has_stability < 0.199
						has_idea = balanced_migration_policy
					}
					AND = {
						has_stability > 0.1
						has_stability < 0.149
						has_idea = promoting_immigration
					}
					AND = {
						has_stability > 0.05
						has_stability < 0.149
						has_idea = promoting_immigration
					}
					AND = {
						has_stability > 0.15
						has_stability < 0.249
						has_idea = ease_border_control
					}
				}
				NOT = { has_idea = severe_migration_control }
				NOT = { has_idea = closed_border }
			}
			add_ideas = high_level_of_emigration
			set_country_flag = high_level_of_emigration
		}
		else_if = {
			limit = {
				NOT = { has_country_flag = catastrophic_level_of_emigration }
				OR = {
					AND = {
						has_stability < 0.099
						OR = {
							has_idea = balanced_migration_policy
							has_idea = promoting_immigration
						}
					}
					AND = {
						has_stability < 0.049
						has_idea = strengthen_border_controls
					}
					AND = {
						has_stability < 0.149
						has_idea = ease_border_control
					}
				}
				NOT = { has_idea = severe_migration_control }
				NOT = { has_idea = closed_border }
			}
			add_ideas = catastrophic_level_of_emigration
			set_country_flag = catastrophic_level_of_emigration
		}
		else = {
			add_ideas = normal_level_of_migration
			set_country_flag = normal_level_of_migration
		}
	}
}
