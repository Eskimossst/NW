add_namespace = NW_portugal

#моряки
country_event = {
	id = NW_portugal.0
	title = NW_portugal.0.t
	desc = NW_portugal.0.d
	picture = GFX_report_event_usa_british_sailors_destroyers
	fire_only_once = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.0" }
	
	trigger = {
		tag = POR
		NOT = { has_government = fascism }
		OR = {
			AND = {
				date > 1936.8.8
				SPR = { has_war_with = SPA }
			}
			AND = {
				date > 1936.8.8
				SPR = { has_war_with = ARA }
			}
			AND = {
				date > 1936.8.8
				FRA = { has_war_with = FRC }
			}
		}
		NOT = {
			has_global_flag = THE_MOTHER_OF_ORDER_FLAG
			has_global_flag = WORLD_OF_SPLIT_FLAG
		}
	}
	option = {
		name = NW_portugal.0.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					has_country_flag = NW_POR_AI_COMMUNIST
					has_country_flag = NW_POR_AI_FASCIST_ALTERNATE
				}
			}
		}
		hidden_effect = {
			country_event = { id = NW_portugal.1 days = 4 }
		}
	}
	option = {
		name = NW_portugal.0.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				OR = {
					is_historical_focus_on = yes
					has_country_flag = NW_POR_AI_MONARCHY
					has_country_flag = NW_POR_AI_NEUTRAL
					has_country_flag = NW_POR_AI_FASCIST
				}
			}
		}
		add_stability = 0.02
		add_war_support = 0.02
		add_popularity = {
			ideology = communism
			popularity = 0.04
		}
		hidden_effect = {
			country_event = { id = NW_portugal.2 days = 4 }
		}
	}
}

country_event = { #покушение на салазара не удалось
	id = NW_portugal.1
	title = NW_portugal.1.t
	desc = NW_portugal.1.d
	picture = GFX_report_event_hungary_refused
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.1" }
	
	is_triggered_only = yes
	option = {
		name = NW_portugal.1.a
		add_war_support = 0.02
	}
}

country_event = { #однако удалось
	id = NW_portugal.2
	title = NW_portugal.2.t
	desc = NW_portugal.2.d
	picture = GFX_report_event_europe_funeral
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.2" }
	
	option = {
		name = NW_portugal.2.a
		add_stability = -0.2
		add_war_support = -0.2
		add_popularity = {
			ideology = neutrality
			popularity = -0.2
		}
		kill_country_leader = yes
		set_country_flag = POR_salazar_dead
		create_country_leader = {
			name = "António Óscar de Fragoso Carmona"
			desc = "POLITICS_António_Óscar_de_Fragoso_Carmona_DESC"
			picture = "Portrait_Antonio_Carmona.dds"
			expire = "1965.1.1"
			ideology = authoritarian_democracy
			traits = { }
		}
	}
}
country_event = { #коммунисты восстают
	id = NW_portugal.3
	title = NW_portugal.3.t
	desc = NW_portugal.3.d
	picture = GFX_report_event_generic_riot
	fire_only_once = yes
	
	trigger = {
		tag = POR
		has_country_flag = POR_salazar_dead
		has_completed_focus = POR_rebirth_of_catolic_centre
		has_civil_war = no
		NOT = { has_global_flag = portugal_comm_cw }
	}
	
	immediate = {
		log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.3"
		set_global_flag = portugal_comm_cw
	}
	
	option = {
		name = NW_portugal.3.a
		ai_chance = {
			factor = 1
		}
		add_stability = -0.10
		add_popularity = { ideology = communism popularity = 0.30 }
		set_politics = {
			ruling_party = communism
			elections_allowed = no
		}
		add_popularity = { ideology = communism popularity = 0.2 }
		complete_national_focus = POR_politic_anticrelicarism
		start_civil_war = {
			ideology = monarchy
			size = 0.45
		}
		hidden_effect = {
			drop_cosmetic_tag = yes
			random_other_country = {
				limit = {
					original_tag = POR
					has_government = monarchy
				}
				load_focus_tree = portugal_focus
				add_timed_idea = { idea = focus_synchronization days = 7 }
				unlock_national_focus = POR_new_country
				unlock_national_focus = POR_radicalization_goverment
				unlock_national_focus = POR_principes_of_non_party
				unlock_national_focus = POR_rebirth_of_catolic_centre
				complete_national_focus = POR_return_monarchism
			}
		}
	}
	option = {
		name = NW_portugal.3.b
		ai_chance = {
			factor = 1
			modifier = {
				factor = 0
				has_country_flag = NW_POR_AI_COMMUNIST
			}
		}
		add_stability = -0.15
		if = {
			limit = { has_completed_focus = POR_portugal_legion }
			start_civil_war = { ideology = communism size = 0.4 }
			hidden_effect = {
				random_other_country = {
					limit = {
						original_tag = POR
						has_government = communism
					}
					load_focus_tree = portugal_focus
					add_timed_idea = { idea = focus_synchronization days = 7 }
					unlock_national_focus = POR_new_country
					unlock_national_focus = POR_radicalization_goverment
					unlock_national_focus = POR_principes_of_non_party
					unlock_national_focus = POR_rebirth_of_catolic_centre
					complete_national_focus = POR_politic_anticrelicarism
					drop_cosmetic_tag = yes
				}
			}
		}
		else_if = {
			limit = { NOT = { has_completed_focus = POR_portugal_legion } }
			start_civil_war = { ideology = communism }
			hidden_effect = {
				random_other_country = {
					limit = {
						original_tag = POR
						has_government = communism
					}
					load_focus_tree = portugal_focus
					add_timed_idea = { idea = focus_synchronization days = 7 }
					unlock_national_focus = POR_new_country
					unlock_national_focus = POR_radicalization_goverment
					unlock_national_focus = POR_principes_of_non_party
					unlock_national_focus = POR_rebirth_of_catolic_centre
					complete_national_focus = POR_politic_anticrelicarism
					drop_cosmetic_tag = yes
				}
			}
		}
	}
}

#Португалия предлагает обсудить статус Оливенсы // Фокус «Решить вопрос с Оливенсой»
country_event = {
	id = NW_portugal.4
	title = NW_portugal.4.t
	desc = NW_portugal.4.desc
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.4" }
	
	option = {
		name = NW_portugal.4.a
		ai_chance = {
			factor = 10
		}
		
		FROM = { transfer_state = 1040 }
		1040 = {
			remove_core_of = ROOT
			add_core_of = FROM
		}
	}
	
	option = {
		name = NW_portugal.4.b
		ai_chance = {
			factor = 50
		}
		trigger = { NOT = { has_government = anarchism } }
		
		add_opinion_modifier = { target = FROM modifier = diplomatic_affront }
		FROM = { add_opinion_modifier = { target = ROOT modifier = diplomatic_affront } }
		FROM = { country_event = { id = NW_portugal.19 } }
	}
	
	option = {
		name = NW_portugal.4.c
		ai_chance = {
			factor = 25
		}
		trigger = { NOT = { has_government = anarchism } }
		FROM = { country_event = { id = NW_portugal.20 } }
	}
}

country_event = { #мануэль и стронники
	id = NW_portugal.5
	title = NW_portugal.5.t
	desc = NW_portugal.5.d
	picture = GFX_report_event_german_politician_speech
	fire_only_once = yes
	
	immediate = {
		log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.5"
		set_global_flag = portugal_comm_cw
	}
	
	trigger = {
		original_tag = POR
		focus_progress = { focus = POR_politic_anticrelicarism progress > 0.1 }
		has_civil_war = no
		NOT = { has_global_flag = portugal_comm_cw }
	}
	option = {
		name = NW_portugal.5.a
		ai_chance = {
			factor = 1
		}
		create_country_leader = {
			name = "Manuel Gonçalves Cerejeira"
			desc = "POLITICS_MANUEL_GONCALVES_CEREJEIRA_DESC"
			picture = "gfx/leaders/POR/Portrait_Cardinal_Cerejeira.dds"
			expire = "1965.1.1"
			ideology = theocratic_monarchy
			traits = { }
		}
		start_civil_war = { ideology = communism ruling_party = monarchy }
		set_cosmetic_tag = POR_patriarch
		complete_national_focus = POR_rebirth_of_catolic_centre
		set_party_name = { 
			ideology = monarchy 
			long_name = POR_neutrality_party_kc_long 
			name = POR_neutrality_party_kc 
		}
		hidden_effect = {
			add_popularity = { ideology = communism popularity = -1 }
			random_other_country = {
				limit = { original_tag = ROOT }
				add_popularity = { ideology = communism popularity = 0.5 }
			}
		}
	}
	option = {
		name = NW_portugal.5.b
		ai_chance = {
			factor = 1
		}
		add_stability = -0.1
		start_civil_war = { ideology = communism }
		hidden_effect = {
			add_popularity = { ideology = communism popularity = 0.5 }
			random_other_country = {
				limit = { original_tag = ROOT }
				add_popularity = { ideology = communism popularity = -1 }
			}
		}
	}
}
country_event = { #ибериский союз событие
	id = NW_portugal.6
	title = NW_portugal.6.t
	desc = NW_portugal.6.d
	picture = GFX_report_event_poland_rejects
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.6" }
	
	option = {
		name = NW_portugal.6.a
		ai_chance = {
			factor = 90
		}
		give_guarantee = POR
		POR = { give_guarantee = ROOT }
	}
	option = {
		name = NW_portugal.6.b
		ai_chance = {
			factor = 10
		}
		POR = { add_opinion_modifier = { target = ROOT modifier = POR_spa_union_deagree } }
	}
}
country_event = { #ибериский союз фокус
	id = NW_portugal.7
	title = NW_portugal.7.t
	desc = NW_portugal.7.d
	picture = GFX_report_event_poland_rejects
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.7" }
	
	option = {
		name = NW_portugal.7.a
		ai_chance = {
			factor = 90
		}
		FROM = {
			create_faction = por_iberian_union
			add_to_faction = ROOT
		}
	}
	option = {
		name = NW_portugal.7.b
		ai_chance = {
			factor = 10
		}
		FROM = { add_opinion_modifier = { target = ROOT modifier = POR_spa_union_deagree } }
	}
}
country_event = { #ибериский союз коммунаров
	id = NW_portugal.8
	title = NW_portugal.8.t
	desc = NW_portugal.8.d
	picture = GFX_report_event_generic_communist_congress
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.8" }
	
	option = {
		name = NW_portugal.8.a
		ai_chance = {
			factor = 90
		}
		POR = { create_faction = por_iberian_union_com }
		POR = { add_to_faction = SPR }
	}
	option = {
		name = NW_portugal.8.b
		ai_chance = {
			factor = 10
		}
		POR = { add_opinion_modifier = { target = ROOT modifier = POR_spa_union_deagree } }
	}
}
country_event = { #папский союз
	id = NW_portugal.9
	title = NW_portugal.9.t
	desc = NW_portugal.9.d
	picture = GFX_report_event_ast_parliament_house
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.9" }
	
	option = {
		name = NW_portugal.9.a
		ai_chance = {
			factor = 90
		}
		if = {
			limit = { is_faction_leader = no }
			create_faction = por_holy_union
		}
		ROOT = { add_to_faction = POR }
		add_ideas = POR_union_with_father_idea
	}
	option = {
		name = NW_portugal.9.b
		ai_chance = {
			factor = 10
		}
		POR = { add_opinion_modifier = { target = ROOT modifier = POR_spa_union_deagree } }
	}
}
country_event = { #ибериский союз франкисты
	id = NW_portugal.10
	title = NW_portugal.10.t
	desc = NW_portugal.10.d
	picture = GFX_report_event_fascists_posing
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.10" }
	
	option = {
		name = NW_portugal.10.a
		ai_chance = {
			factor = 90
		}
		POR = { create_faction = por_iberian_union }
		POR = { add_to_faction = ROOT }
	}
	option = {
		name = NW_portugal.10.b
		ai_chance = {
			factor = 10
		}
		POR = { add_opinion_modifier = { target = ROOT modifier = POR_spa_union_deagree } }
	}
}
country_event = { #коминтерн
	id = NW_portugal.11
	title = NW_portugal.11.t
	desc = NW_portugal.11.d
	picture = GFX_report_event_stalin_meeting
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.11" }
	
	option = {
		name = NW_portugal.11.a
		ai_chance = {
			factor = 90
		}
		add_to_faction = FROM
	}
	option = {
		name = NW_portugal.11.b
		ai_chance = {
			factor = 10
		}
		FROM = { add_opinion_modifier = { target = ROOT modifier = POR_spa_union_deagree } }
	}
}
country_event = { #600-летний союз
	id = NW_portugal.12
	title = NW_portugal.12.t
	desc = NW_portugal.12.d
	picture = GFX_report_event_FDR_speech
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.12" }
	
	option = {
		name = NW_portugal.12.a
		ai_chance = {
			factor = 90
		}
		ENG = { add_to_faction = FROM }
	}
	option = {
		name = NW_portugal.12.b
		ai_chance = {
			factor = 10
		}
		POR = { add_opinion_modifier = { target = ENG modifier = POR_spa_union_deagree } }
	}
}
country_event = { #конкордат
	id = NW_portugal.13
	title = NW_portugal.13.t
	desc = NW_portugal.13.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.13" }
	
	option = {
		name = NW_portugal.13.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				is_in_faction_with = POR
			}
		}
		POR = { add_ideas = POR_cordonat_with_vatican_idea }
		add_political_power = 50
	}
	option = {
		name = NW_portugal.13.b
		ai_chance = {
			factor = 1
		}
		POR = { add_ideas = POR_cordonat_with_vatican2_idea }
		add_political_power = 20
	}
}
country_event = { #ось
	id = NW_portugal.14
	title = NW_portugal.14.t
	desc = NW_portugal.14.d
	picture = GFX_report_event_hitler_croatia_handshake
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.14" }
	
	option = {
		name = NW_portugal.14.a
		ai_chance = {
			factor = 90
		}
		add_to_faction = FROM
	}
	option = {
		name = NW_portugal.14.b
		ai_chance = {
			factor = 10
		}
		FROM = { add_opinion_modifier = { target = ROOT modifier = POR_spa_union_deagree } }
	}
}
country_event = { #базы
	id = NW_portugal.15
	title = NW_portugal.15.t
	desc = NW_portugal.15.d
	picture = GFX_report_event_king_speech
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.15" }
	
	option = {
		name = NW_portugal.15.a
		ai_chance = {
			factor = 10
		}
		ENG = { transfer_state = 698 }
		add_political_power = 20
	}
	option = {
		name = NW_portugal.15.b
		ai_chance = {
			factor = 10
		}
		add_opinion_modifier = { target = ENG modifier = POR_spa_union_deagree }
		USA = { create_wargoal = { type = take_state generator = { 698 } } }
	}
}
country_event = { #базы2
	id = NW_portugal.16
	title = NW_portugal.16.t
	desc = NW_portugal.16.d
	picture = GFX_report_event_iww_demonstration
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.16" }
	
	fire_only_once = yes
	
	trigger = {
		tag = ENG
		has_full_control_of_state = 698
		has_war = no
		NOT = {
			has_global_flag = THE_MOTHER_OF_ORDER_FLAG
			has_global_flag = WORLD_OF_SPLIT_FLAG
		}
	}
	option = {
		name = NW_portugal.16.a
		ai_chance = {
			factor = 10
		}
		POR = { transfer_state = 698 }
	}
	option = {
		name = NW_portugal.16.b
		ai_chance = {
			factor = 10
		}
		add_stability = -0.04
		POR = { add_opinion_modifier = { target = ROOT modifier = POR_spa_union_deagree } }
		POR = { create_wargoal = { type = take_state generator = { 698 } } }
	}
}
country_event = { #кордонат2
	id = NW_portugal.17
	title = NW_portugal.17.t
	desc = NW_portugal.17.d
	picture = GFX_report_event_generic_read_write
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.17" }
	
	option = {
		name = NW_portugal.17.a
		ai_chance = {
			factor = 1
			modifier = {
				factor = 100
				is_in_faction_with = POR
			}
		}
		POR = { add_ideas = POR_cordonat_with_vatican_idea }
		add_political_power = 50
	}
	option = {
		name = NW_portugal.17.b
		ai_chance = {
			factor = 1
		}
		POR = { add_ideas = POR_cordonat_with_vatican2_idea }
		add_political_power = 20
	}
	option = {
		name = NW_portugal.17.c
		ai_chance = {
			factor = 1
		}
		POR = { add_opinion_modifier = { target = ROOT modifier = POR_spa_union_deagree } }
	}
}
country_event = { #угнетёныенароды
	id = NW_portugal.18
	title = NW_portugal.18.t
	desc = NW_portugal.18.d
	picture = GFX_report_event_african_soldiers
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.18" }
	
	fire_only_once = yes
	
	trigger = {
		original_tag = POR
		has_civil_war = yes
		has_government = communism
		#ANG
		owns_state = 1044
		owns_state = 1045
		owns_state = 1056
		owns_state = 540
		#MZB
		owns_state = 544
		owns_state = 983
		owns_state = 983
		NOT = {
			has_global_flag = THE_MOTHER_OF_ORDER_FLAG
			has_global_flag = WORLD_OF_SPLIT_FLAG
		}
	}
	option = {
		name = NW_portugal.18.a
		ai_chance = {
			factor = 10
		}
		release_puppet = MZB
		release_puppet = ANG
		add_war_support = 0.05
		hidden_effect = {
			every_country = {
				limit = {
					OR = {
						tag = MZB
						tag = ANG
					}
				}
				if = {
					limit = { NOT = { has_template = "National battalion" } }
					division_template = {
						name = "National battalion"
						is_locked = no
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
						}
					}
				}
				capital_scope = {
					create_unit = {
						division = "name = \"National battalion\" division_template = \"National battalion\" start_experience_factor = 0.2" 
						owner = PREV
						count = 4
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
		}
	}
	option = {
		name = NW_portugal.18.b
		ai_chance = {
			factor = 10
		}
		release = MZB
		release = ANG
		declare_war_on = { target = MZB type = annex_everything }
		declare_war_on = { target = ANG type = annex_everything }
	}
}

#Отказ возвращать Оливенсу
country_event = {
	id = NW_portugal.19
	title = NW_portugal.19.t
	desc = NW_portugal.19.desc
	picture = GFX_report_event_generic_conference
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.19" }
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.19" }
	
	option = {
		name = NW_portugal.19.a
	}
}

#Предложение Оливенсы в обмен на острова Зелёного мыса
country_event = {
	id = NW_portugal.20
	title = NW_portugal.20.t
	desc = NW_portugal.20.desc
	picture = GFX_report_event_generic_conference
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.20" }
	
	option = {
		name = NW_portugal.20.a
		ai_chance = {
			factor = 50
		}
		
		ROOT = { transfer_state = 1040 }
		1040 = {
			remove_core_of = FROM
			add_core_of = ROOT
		}
		
		FROM = { transfer_state = 702 }
		702 = {
			remove_core_of = ROOT
			add_core_of = FROM
		}
	}
	
	option = {
		name = NW_portugal.20.b
		ai_chance = {
			factor = 50
		}
	}
}

#Коронация Дуарте I
country_event = {
	id = NW_portugal.21
	title = NW_portugal.21.t
	desc = NW_portugal.21.desc
	picture = GFX_report_event_generic_rally_3
	fire_only_once = yes
	
	trigger = {
		original_tag = POR
		has_completed_focus = POR_return_monarchism
		has_government = monarchy
		has_civil_war = yes
		NOT = {
			has_global_flag = THE_MOTHER_OF_ORDER_FLAG
			has_global_flag = WORLD_OF_SPLIT_FLAG
		}
	}
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.21" }
	
	option = {
		name = NW_portugal.21.a
		trigger = {
			NOT = { has_completed_focus = POR_catholic_portugal }
		}
		ai_chance = {
			factor = 75
		}
		create_country_leader = {
			name = "Duarte Nuno"
			desc = "POLITICS_DUERTE_I_DESC"
			picture = "gfx/leaders/POR/portrait_por_duarte_nuno.dds"
			expire = "1965.1.1"
			ideology = dual_monarchy
			traits = {
			}
		}
		add_war_support = -0.15
		set_country_flag = POR_all_portugal_flag
		effect_tooltip = { unlock_national_focus = POR_all_portugal }
	}
	
	option = {
		name = NW_portugal.21.b
		ai_chance = {
			factor = 25
		}
		if = {
		    limit = { owns_state = 544 }
			release = ANG
			ANG = {
				create_country_leader = {
					name = "Duarte Nuno"
					desc = "POLITICS_DUERTE_I_DESC"
					picture = "gfx/leaders/POR/portrait_por_duarte_nuno.dds"
					expire = "1965.1.1"
					ideology = dual_monarchy
					traits = {
					}
				}
				transfer_state = 544
				declare_war_on = { target = ROOT type = annex_everything }
				if = {
					limit = { NOT = { has_template = "Liberation Army" } }
					division_template = {
						name = "Liberation Army"
						is_locked = no
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }
							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }
						}
					}
				}
				capital_scope = {
					create_unit = {
						division = "name = \"Infantry Division\" division_template = \"Liberation Army\" start_experience_factor = 0.2" 
						owner = PREV
						count = 4
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
		}	
		if = {
			limit = { 
			    has_civil_war = yes 
				ANG = { exists = yes }
			}
			random_other_country = {
				limit = {
					original_tag = ROOT
					NOT = { tag = ROOT }
				}
				ANG = { declare_war_on = { target = PREV type = annex_everything } }
			}
		}
		hidden_effect = {
			ANG = {
				set_politics = {
					ruling_party = monarchy
					elections_allowed = no
				}
				add_popularity = { ideology = monarchy popularity = 1.0 }
			}
		}
	}
}

# Португалия просит винтовки
country_event = {
	id = NW_portugal.30
	title = NW_portugal.30.t
	desc = NW_portugal.30.desc
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.30" }
	
	option = { # yes
		name = NW_portugal.30.a
		ai_chance = {
			factor = 80
			modifier = {
				factor = 100
				is_in_faction_with = POR
			}
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
			modifier = {
				factor = 0
				AND = {
					has_war = yes
					has_equipment = { infantry_equipment < 2000 }
				}
			}
		}
		effect_tooltip = {
			send_equipment = {
				equipment = infantry_equipment
				amount = 1600
				target = POR
			}
		}
		add_timed_idea = { idea = POR_equipment_payment days = 80 }
		hidden_effect = { POR = { country_event = { id = NW_portugal.33 } } }
	}
	
	option = { # no
		name = NW_portugal.30.b
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_in_faction_with = POR
			}
			modifier = {
				factor = 100
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
		}
		
		add_political_power = 20
		hidden_effect = { POR = { country_event = { id = NW_portugal.34 } } }
	}
}

# Португалия просит пушки
country_event = {
	id = NW_portugal.31
	title = NW_portugal.31.t
	desc = NW_portugal.31.desc
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.31" }
	
	option = { # yes
		name = NW_portugal.30.a
		ai_chance = {
			factor = 80
			modifier = {
				factor = 100
				is_in_faction_with = POR
			}
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
			modifier = {
				factor = 0
				AND = {
					has_war = yes
					has_equipment = { artillery_equipment < 150 }
				}
			}
		}
		effect_tooltip = {
			send_equipment = {
				equipment = artillery_equipment
				amount = 100
				target = POR
			}
		}
		add_timed_idea = { idea = POR_artillery_payment days = 80 }
		hidden_effect = { POR = { country_event = { id = NW_portugal.33 } } }
	}
	
	option = { # no
		name = NW_portugal.30.b
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_in_faction_with = POR
			}
			modifier = {
				factor = 100
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
		}
		
		add_political_power = 20
		hidden_effect = { POR = { country_event = { id = NW_portugal.34 } } }
	}
}

# Португалия просит авто
country_event = {
	id = NW_portugal.32
	title = NW_portugal.32.t
	desc = NW_portugal.32.desc
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.32" }
	
	option = { # yes
		name = NW_portugal.30.a
		ai_chance = {
			factor = 80
			modifier = {
				factor = 100
				is_in_faction_with = POR
			}
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
			modifier = {
				factor = 0
				AND = {
					has_war = yes
					has_equipment = { motorized_equipment < 150 }
				}
			}
		}
		effect_tooltip = {
			send_equipment = {
				equipment = motorized_equipment
				amount = 100
				target = POR
			}
		}
		add_timed_idea = { idea = POR_transport_payment days = 80 }
		hidden_effect = { POR = { country_event = { id = NW_portugal.33 } } }
	}
	
	option = { # no
		name = NW_portugal.30.b
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_in_faction_with = POR
			}
			modifier = {
				factor = 100
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
		}
		
		add_political_power = 20
		hidden_effect = { POR = { country_event = { id = NW_portugal.34 } } }
	}
}

# Груз идёт!
country_event = {
	id = NW_portugal.33
	title = { text = NW_portugal.33.t.weapons trigger = { has_country_flag = POR_buy_weapons_in } }
	desc = { text = NW_portugal.33.d.weapons trigger = { has_country_flag = POR_buy_weapons_in } }
	title = { text = NW_portugal.33.t.artillery trigger = { has_country_flag = POR_buy_artillery_in } }
	desc = { text = NW_portugal.33.d.artillery trigger = { has_country_flag = POR_buy_artillery_in } }
	title = { text = NW_portugal.33.t.transport trigger = { has_country_flag = POR_buy_transport_in } }
	desc = { text = NW_portugal.33.d.transport trigger = { has_country_flag = POR_buy_transport_in } }
	title = { text = NW_portugal.33.t.transport trigger = { NOT = { has_country_flag = POR_buy_transport_in has_country_flag = POR_buy_weapons_in has_country_flag = POR_buy_artillery_in } } }
	desc = { text = NW_portugal.33.d.transport trigger = { NOT = { has_country_flag = POR_buy_transport_in has_country_flag = POR_buy_weapons_in has_country_flag = POR_buy_artillery_in } } }
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.33" }
	
	option = { # yes
		name = NW_portugal.33.a
		
		if = {
			limit = { has_country_flag = POR_buy_weapons_in }
			FROM = {
				effect_tooltip = {
					send_equipment = {
						equipment = infantry_equipment
						amount = 1600
						target = POR
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = -1600
					}
				}
			}
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = infantry_equipment
					amount = 1600
					producer = POR
				}
			}
		}
		else_if = { 
			limit = { has_country_flag = POR_buy_artillery_in }
			FROM = {
				effect_tooltip = {
					send_equipment = {
						equipment = artillery_equipment
						amount = 100
						target = POR
					}
				} 
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = artillery_equipment
						amount = -100
					}
				}
			}
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = artillery_equipment
					amount = 100
					producer = POR
				}
			}
		}
		else_if = {
			limit = { has_country_flag = POR_buy_transport_in }
			FROM = {
				effect_tooltip = {
					send_equipment = {
						equipment = motorized_equipment
						amount = 100
						target = POR
					}
				}
				hidden_effect = {
					add_equipment_to_stockpile = {
						type = motorized_equipment
						amount = -100
					}
				}
			}
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = motorized_equipment
					amount = 100
					producer = POR
				}
			}
		}
		else = { custom_effect_tooltip = cos_ne_tak_tt }
		
		clr_country_flag = POR_buy_weapons_in
		clr_country_flag = POR_buy_artillery_in
		clr_country_flag = POR_buy_transport_in
		clr_country_flag = POR_forbidden
	}
}

# Груз не придёт
country_event = {
	id = NW_portugal.34
	title = { text = NW_portugal.34.t.weapons trigger = { has_country_flag = POR_buy_weapons_in } }
	desc = { text = NW_portugal.34.d.weapons trigger = { has_country_flag = POR_buy_weapons_in } }
	title = { text = NW_portugal.34.t.artillery trigger = { has_country_flag = POR_buy_artillery_in } }
	desc = { text = NW_portugal.34.d.artillery trigger = { has_country_flag = POR_buy_artillery_in } }
	title = { text = NW_portugal.34.t.transport trigger = { has_country_flag = POR_buy_transport_in } }
	desc = { text = NW_portugal.34.d.transport trigger = { has_country_flag = POR_buy_transport_in } }
	title = { text = NW_portugal.34.t.transport trigger = { NOT = { has_country_flag = POR_buy_transport_in has_country_flag = POR_buy_weapons_in has_country_flag = POR_buy_artillery_in } } }
	desc = { text = NW_portugal.34.d.transport trigger = { NOT = { has_country_flag = POR_buy_transport_in has_country_flag = POR_buy_weapons_in has_country_flag = POR_buy_artillery_in } } }
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.34" }
	
	option = { # yes
		name = NW_portugal.34.a
		
	}
}

# Запрос на транспортники
country_event = {
	id = NW_portugal.35
	title = NW_portugal.35.t 
	desc = NW_portugal.35.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.35" }
	
	option = { # yes
		name = NW_portugal.30.a
		ai_chance = {
			factor = 80
			modifier = {
				factor = 100
				is_in_faction_with = POR
			}
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
			modifier = {
				factor = 0
				AND = {
					has_war = yes
					has_equipment = { transport_plane_equipment_1 < 30 }
				}
			}
		}
		effect_tooltip = {
			send_equipment = {
				equipment = transport_plane_equipment_1
				amount = 25
				target = POR
			}
		}
		
		add_timed_idea = { idea = POR_aviatransport_payment days = 120 }
		hidden_effect = { POR = { country_event = { id = NW_portugal.37 } } }
	}
	
	option = { # no
		name = NW_portugal.30.b
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_in_faction_with = POR
			}
			modifier = {
				factor = 100
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
		}
		
		add_political_power = 30
		hidden_effect = { POR = { country_event = { id = NW_portugal.36 } } }
	}
}

# Нам отказали
country_event = {
	id = NW_portugal.36
	title = NW_portugal.36.t 
	desc = NW_portugal.36.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.36" }
	
	option = { # штош...
		name = NW_portugal.34.a

	}
}

# Немцы согласились
country_event = {
	id = NW_portugal.37
	title = NW_portugal.37.t 
	desc = NW_portugal.37.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.37" }
	
	option = { # штош...
		name = NW_portugal.37.a
		
		FROM = {
			effect_tooltip = {
				send_equipment = {
					equipment = transport_plane_equipment_1
					amount = 25
					target = POR
				}
			}
			hidden_effect = {
				add_equipment_to_stockpile = {
					type = transport_plane_equipment_1
					amount = -25
				}
			}
		}
		hidden_effect = {
			add_equipment_to_stockpile = {
				type = transport_plane_equipment_1
				amount = 25
				producer = POR
			}
		}
	}
}

country_event = {
	id = NW_portugal.38
	title = NW_portugal.38.t 
	desc = NW_portugal.38.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.38" }
	
	option = { # yes
		name = NW_portugal.38.a
		ai_chance = {
			factor = 80
			modifier = {
				factor = 100
				is_in_faction_with = POR
			}
			modifier = {
				factor = 0
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
			modifier = {
				factor = 0
				AND = {
					has_war = yes
					has_equipment = { transport_plane_equipment_1 < 30 }
				}
			}
		}
		hidden_effect = { POR = { country_event = { id = NW_portugal.39 } } }
	}
	
	option = { # no
		name = NW_portugal.38.b
		ai_chance = {
			factor = 20
			modifier = {
				factor = 0
				is_in_faction_with = POR
			}
			modifier = {
				factor = 100
				NOT = { is_in_faction_with = POR }
				POR = { is_in_faction = yes }
			}
		}
		
		hidden_effect = { POR = { country_event = { id = NW_portugal.36 } } }
		if = {
			limit = { original_tag = ITA }
			POR = { clr_country_flag = POR_italian_bombers }
		}
		if = {
			limit = { original_tag = ENG }
			POR = { 
				clr_country_flag = POR_british_fighters
				clr_country_flag = POR_british_bombers 
			}
		}
	}
}

country_event = {
	id = NW_portugal.39
	title = NW_portugal.39.t 
	desc = NW_portugal.39.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.39" }
	
	option = { # yes
		name = NW_portugal.39.a
		if = {
			limit = { has_country_flag = POR_italian_bombers FROM = { original_tag = ITA } }
			ITA = { 
				if = {
					limit = { 
						has_tech = early_bomber 
						NOT = { has_tech = tactical_bomber1 }
					}
					create_production_license = { target = POR equipment = { type = tac_bomber_equipment_0 } cost_factor = 1 } 
				}
				if = {
					limit = { 
						has_tech = tactical_bomber1 
						NOT = { has_tech = tactical_bomber2 }
					}
					create_production_license = { target = POR equipment = { type = tac_bomber_equipment_1 } cost_factor = 1 } 
				}
				if = {
					limit = { 
						has_tech = tactical_bomber2
						NOT = { has_tech = tactical_bomber3 } 
					}
					create_production_license = { target = POR equipment = { type = tac_bomber_equipment_2 } cost_factor = 1 } 
				}
				if = {
					limit = { 
						has_tech = tactical_bomber3
					}
					create_production_license = { target = POR equipment = { type = tac_bomber_equipment_3 } cost_factor = 1 } 
				}
			} 
			clr_country_flag = POR_italian_bombers
		}
		if = {
			limit = { has_country_flag = POR_british_fighters FROM = { original_tag = ENG } }
			ENG = { 
				if = {
					limit = {
						has_tech = early_fighter 
						NOT = { has_tech = fighter1 }
					}
					create_production_license = { target = POR equipment = { type = fighter_equipment_0 } cost_factor = 1 } 
				} 
				if = {
					limit = {
						has_tech = fighter1 
						NOT = { has_tech = fighter2 }
					}
					create_production_license = { target = POR equipment = { type = fighter_equipment_1 } cost_factor = 1 } 
				} 
				if = {
					limit = {
						has_tech = fighter2 
						NOT = { has_tech = fighter3 }
					}
					create_production_license = { target = POR equipment = { type = fighter_equipment_2 } cost_factor = 1 } 
				} 
				if = {
					limit = {
						has_tech = fighter3
					}
					create_production_license = { target = POR equipment = { type = fighter_equipment_3 } cost_factor = 1 } 
				} 
			}
			clr_country_flag = POR_british_fighters
		}
		if = {
			limit = { has_country_flag = POR_british_bombers FROM = { original_tag = ENG } }
			ENG = { 
				if = {
					limit = { 
						has_tech = early_bomber 
						NOT = { has_tech = tactical_bomber1 }
					}
					create_production_license = { target = POR equipment = { type = tac_bomber_equipment_0 } cost_factor = 1 } 
				}
				if = {
					limit = { 
						has_tech = tactical_bomber1 
						NOT = { has_tech = tactical_bomber2 }
					}
					create_production_license = { target = POR equipment = { type = tac_bomber_equipment_1 } cost_factor = 1 } 
				}
				if = {
					limit = { 
						has_tech = tactical_bomber2
						NOT = { has_tech = tactical_bomber3 }
					}
					create_production_license = { target = POR equipment = { type = tac_bomber_equipment_2 } cost_factor = 1 } 
				}
				if = {
					limit = { 
						has_tech = tactical_bomber3
					}
					create_production_license = { target = POR equipment = { type = tac_bomber_equipment_3 } cost_factor = 1 } 
				}
			}
			clr_country_flag = POR_british_bombers
		}
		if = {
			limit = { has_country_flag = POR_italian_bombers }
			
		}
	}
}

country_event = {
	id = NW_portugal.40
	title = NW_portugal.40.t 
	desc = NW_portugal.40.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.40" }
	
	option = { # yes
		name = NW_portugal.40.a
		ai_chance = {
			factor = 50
		}
		POR = { country_event = { id = NW_portugal.41 hours = 6 } }
	}
	
	option = { # yes
		name = NW_portugal.40.b
		ai_chance = {
			factor = 50
		}
		IF = {
			limit = { 171 = { is_owned_by = SPR } }
			POR = { transfer_state = 171 }
			171 = { add_core_of = POR }
		}
		IF = {
			limit = { 171 = { is_owned_by = GLC } }
			POR = { puppet = GLC }
		}
	}
}

country_event = {
	id = NW_portugal.41
	title = NW_portugal.41.t 
	desc = NW_portugal.41.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.41" }
	
	option = { # yes
		name = NW_portugal.41.a
		ai_chance = {
			factor = 50
		}
		IF = {
			limit = { SPR = { owns_state = 171 } }
			create_wargoal = {
				type = take_state_focus
				target = SPR
				generator = { 171 } # Athens
			}
		}
		IF = {
			limit = { GLC = { owns_state = 171 } }
			create_wargoal = {
				type = take_state_focus
				target = GLC
				generator = { 171 } # Athens
			}
		}
	}
}

country_event = {
	id = NW_portugal.42
	title = NW_portugal.42.t 
	desc = NW_portugal.42.desc 
	picture = GFX_report_event_generic_rally_3
	
	trigger = {
		POR = { has_civil_war = yes NOT = { has_war_with = ENG } }
		has_war_with = ANG
		tag = ENG
		NOT = {
			has_global_flag = THE_MOTHER_OF_ORDER_FLAG
			has_global_flag = WORLD_OF_SPLIT_FLAG
		}
	}
	
	fire_only_once = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.42" }
	
	option = { # yes
		name = NW_portugal.42.a
		ai_chance = {
			factor = 50
		}
		POR = { country_event = { id = NW_portugal.43 hours = 6 } }
	}
	
	option = { # yes
		name = NW_portugal.42.b
		ai_chance = {
			factor = 50
		}
		
	}
}

country_event = {
	id = NW_portugal.43
	title = NW_portugal.43.t 
	desc = NW_portugal.43.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.43" }
	
	option = { # yes
		name = NW_portugal.43.a
		ai_chance = {
			factor = 50
		}
		declare_war_on = {
			target = ANG
			type = annex_everything
		}
	}
	
	option = { # yes
		name = NW_portugal.43.b
		ai_chance = {
			factor = 50
		}
		ENG = { country_event = { id = NW_portugal.44 hours = 6 } }
	}
}

country_event = {
	id = NW_portugal.44
	title = NW_portugal.44.t 
	desc = NW_portugal.44.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.43" }
	
	option = { # yes
		name = NW_portugal.44.a
		ai_chance = {
			factor = 50
		}
		
	}
}

country_event = {
	id = NW_portugal.45
	title = NW_portugal.45.t 
	desc = NW_portugal.45.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.46" }
	
	option = { # yes
		name = NW_portugal.45.a
		ai_chance = {
			factor = 50
		}
		POR = { country_event = { id = NW_portugal.46 hours = 6 } }
	}
	
	option = { # yes
		name = NW_portugal.45.b
		ai_chance = {
			factor = 50
		}
		IF = {
			limit = { ENG = { owns_state = 540 } }
			POR = { transfer_state = 540 }
		}
		IF = {
			limit = { ENG = { owns_state = 544 } }
			POR = { transfer_state = 544 }
		}
	}
}

country_event = {
	id = NW_portugal.46
	title = NW_portugal.46.t 
	desc = NW_portugal.46.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.46" }
	
	option = { # yes
		name = NW_portugal.46.a
		ai_chance = {
			factor = 50
		}
		IF = {
			limit = { ENG = { owns_state = 540 } }
			create_wargoal = {
				type = take_state_focus
				target = ENG
				generator = { 540 } # Athens
			}
		}
		IF = {
			limit = { ENG = { owns_state = 544 } }
			create_wargoal = {
				type = take_state_focus
				target = ENG
				generator = { 544 } # Athens
			}
		}
	}
	
	option = { # yes
		name = NW_portugal.46.b
		ai_chance = {
			factor = 50
		}
	}
}

country_event = {
	id = NW_portugal.47
	title = NW_portugal.47.t 
	desc = NW_portugal.47.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.47" }
	
	option = { # yes
		name = NW_portugal.47.a
		ai_chance = {
			factor = 50
		}
		transfer_state = 1056
		transfer_state = 540
		white_peace = POR
		IF = {
			limit = { POR = { is_faction_leader = yes } }
			every_country = {
				limit = { is_in_faction_with = POR has_war_with = COG }
				white_peace = COG
			}
		}
		IF = {
			limit = { POR = { owns_state = 1004 } COG = { controls_state = 1004 } }
			transfer_state = 1004
		}
		IF = {
			limit = { POR = { owns_state = 544 } COG = { controls_state = 544 } }
			transfer_state = 544
		}
		IF = {
			limit = { POR = { owns_state = 542 } COG = { controls_state = 542 } }
			transfer_state = 542
		}
		IF = {
			limit = { POR = { owns_state = 545 } COG = { controls_state = 545 } }
			transfer_state = 545
		}
	}
	
	option = { # yes
		name = NW_portugal.47.b
		ai_chance = {
			factor = 50
		}
		COG = { country_event = { id = NW_portugal.48 hours = 6 } }
	}
}

country_event = {
	id = NW_portugal.48
	title = NW_portugal.48.t 
	desc = NW_portugal.48.desc 
	picture = GFX_report_event_generic_rally_3
	
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.48" }
	
	option = { # yes
		name = NW_portugal.48.a
		ai_chance = {
			factor = 50
		}
		POR = { add_stability = -0.03 }
	}
}

country_event = {
	id = NW_portugal.49
	title = NW_portugal.49.t 
	desc = NW_portugal.49.desc 
	picture = GFX_report_event_generic_rally_3
	fire_only_once = yes
	
	trigger = {
		tag = POR
		has_idea = POR_luizotropikalism_idea
		OR = {
			NOT = { owns_state = 540 }
			NOT = { owns_state = 544 }
		}
		NOT = {
			has_global_flag = THE_MOTHER_OF_ORDER_FLAG
			has_global_flag = WORLD_OF_SPLIT_FLAG
		}
	}
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.49" }
	
	option = { # yes
		name = NW_portugal.49.a
		ai_chance = {
			factor = 50
		}
		remove_ideas = POR_luizotropikalism_idea
		add_stability = -0.1
		IF = {
			limit = { has_government = fascism }
			add_timed_idea = {
				idea = POR_democratic_influence_idea
				days = 300
			}
		}
		IF = {
			limit = { NOT = { has_government = fascism } }
			add_timed_idea = {
				idea = POR_fascist_influence_idea
				days = 300
			}
		}
	}
}

country_event = {
	id = NW_portugal.50
	title = NW_portugal.50.t 
	desc = NW_portugal.50.desc 
	picture = GFX_report_event_generic_rally_3
	
	trigger = {
		tag = POR
		is_subject = no
		count_triggers = {
			amount = 2
			owns_state = 180
			owns_state = 112
			owns_state = 181
			owns_state = 795
			owns_state = 179
		}
		has_idea = POR_fascist_influence_idea
		NOT = { has_government = fascism }
		has_civil_war = no
	}
	
	mean_time_to_happen = {
		days = 14
	}
	
	immediate = {
		log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.50"
		hidden_effect = { remove_ideas = POR_fascist_influence_idea }
	}
	
	option = { # yes
		name = NW_portugal.50.a
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0
				has_country_flag = NW_POR_AI_FASCIST_ALTERNATE
			}
		}
		if = {
			limit = { owns_state = 180 }
			if = {
				limit = { has_country_flag = NW_POR_AI_FASCIST_ALTERNATE }
				start_civil_war = {
					ideology = fascism
					size = 0.5
					states = { 180 }
				}
			}
			else = {
				start_civil_war = {
					ideology = fascism
					size = 0.1
					states = { 180 }
				}
			}
		}
		else = {
			if = {
				limit = { has_country_flag = NW_POR_AI_FASCIST_ALTERNATE }
				start_civil_war = {
					ideology = fascism
					size = 0.5
				}
			}
			else = {
				start_civil_war = {
					ideology = fascism
					size = 0.1
				}
			}
		}
		hidden_effect = {
			random_other_country = {
				limit = {
					original_tag = POR
					has_government = fascism
				}
				load_focus_tree = portugal_focus
				add_timed_idea = { idea = focus_synchronization days = 7 }
				unlock_national_focus = POR_new_country
				unlock_national_focus = POR_radicalization_goverment
				unlock_national_focus = POR_principes_of_non_party
				complete_national_focus = POR_national_sindicalist_revolution
			}
		}
	}
	option = { # yes
		name = NW_portugal.50.b
		ai_chance = {
			factor = 70
		}
		trigger = {
			NOT = {
				has_completed_focus = POR_return_for_strongest_gov
				has_completed_focus = POR_rebirth_of_catolic_centre
				has_completed_focus = POR_prison_kabo_verde
			}
			#has_country_flag = POR_salazar_dead
		}
		set_politics = {
			ruling_party = fascism
			elections_allowed = no
		}
		set_country_flag = POR_national_sindicalist_revolution_flag
		IF = {
			limit = { has_completed_focus = POR_radicalization_goverment }
			complete_national_focus = POR_national_sindicalist_revolution
		}
	}
}

country_event = {
	id = NW_portugal.51
	title = NW_portugal.51.t 
	desc = NW_portugal.51.desc 
	picture = GFX_report_event_generic_rally_3
	fire_only_once = yes
	
	trigger = {
		tag = POR
		has_idea = POR_weak_ties_with_colonies_idea
		OR = {
			has_stability < 0.2
			has_country_flag = POR_salazar_dead
		}
		OR = {
			owns_state = 540
			owns_state = 544
		}
		NOT = {
			has_global_flag = THE_MOTHER_OF_ORDER_FLAG
			has_global_flag = WORLD_OF_SPLIT_FLAG
		}
	}
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.51" }
	
	option = {
		name = NW_portugal.51.a
		ai_chance = {
			factor = 75
		}
		
		remove_ideas = POR_weak_ties_with_colonies_idea
		if = {
			limit = { owns_state = 540 }
			release_puppet = ANG
		}
		if = {
			limit = { owns_state = 544 }
			release_puppet = MZB
		}
	}
	
	option = {
		name = NW_portugal.51.b
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				has_country_flag = NW_POR_AI_FASCIST_ALTERNATE
			}
		}
		remove_ideas = POR_weak_ties_with_colonies_idea
		add_stability = -0.1
		ANG = {
			transfer_state = 540
			declare_war_on = { target = ROOT type = annex_everything }
		}
		MZB = {
			transfer_state = 544
			declare_war_on = { target = ROOT type = annex_everything }
		}
	}
}


#TEST
country_event = {
	id = NW_portugal.999
	title = NW_portugal.999.t 
	desc = NW_portugal.999.desc 
	picture = GFX_report_event_generic_rally_3
	is_triggered_only = yes
	
	immediate = { log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event NW_portugal.999" }
	
	option = {
		name = NW_portugal.999.a
		
	}
}